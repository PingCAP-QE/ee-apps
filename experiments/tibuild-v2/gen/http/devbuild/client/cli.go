// Code generated by goa v3.20.0, DO NOT EDIT.
//
// devbuild HTTP client CLI support package
//
// Command:
// $ goa gen github.com/PingCAP-QE/ee-apps/tibuild/design

package client

import (
	"encoding/json"
	"fmt"
	"strconv"

	devbuild "github.com/PingCAP-QE/ee-apps/tibuild/gen/devbuild"
	goa "goa.design/goa/v3/pkg"
)

// BuildListPayload builds the payload for the devbuild list endpoint from CLI
// flags.
func BuildListPayload(devbuildListSize string, devbuildListOffset string, devbuildListHotfix string, devbuildListCreatedBy string) (*devbuild.ListPayload, error) {
	var err error
	var size int
	{
		if devbuildListSize != "" {
			var v int64
			v, err = strconv.ParseInt(devbuildListSize, 10, strconv.IntSize)
			size = int(v)
			if err != nil {
				return nil, fmt.Errorf("invalid value for size, must be INT")
			}
		}
	}
	var offset int
	{
		if devbuildListOffset != "" {
			var v int64
			v, err = strconv.ParseInt(devbuildListOffset, 10, strconv.IntSize)
			offset = int(v)
			if err != nil {
				return nil, fmt.Errorf("invalid value for offset, must be INT")
			}
		}
	}
	var hotfix *bool
	{
		if devbuildListHotfix != "" {
			var val bool
			val, err = strconv.ParseBool(devbuildListHotfix)
			hotfix = &val
			if err != nil {
				return nil, fmt.Errorf("invalid value for hotfix, must be BOOL")
			}
		}
	}
	var createdBy *string
	{
		if devbuildListCreatedBy != "" {
			createdBy = &devbuildListCreatedBy
		}
	}
	v := &devbuild.ListPayload{}
	v.Size = size
	v.Offset = offset
	v.Hotfix = hotfix
	v.CreatedBy = createdBy

	return v, nil
}

// BuildCreatePayload builds the payload for the devbuild create endpoint from
// CLI flags.
func BuildCreatePayload(devbuildCreateBody string, devbuildCreateDryrun string) (*devbuild.CreatePayload, error) {
	var err error
	var body CreateRequestBody
	{
		err = json.Unmarshal([]byte(devbuildCreateBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"createdBy\": \"mortimer@herzogfranecki.biz\",\n      \"request\": {\n         \"buildEnv\": \"Sunt nihil quia numquam suscipit corrupti qui.\",\n         \"builderImg\": \"Sint ut blanditiis.\",\n         \"edition\": \"enterprise\",\n         \"features\": \"Aperiam natus in ut quae accusantium.\",\n         \"gitRef\": \"Numquam possimus possimus ipsum rerum unde.\",\n         \"githubRepo\": \"Numquam neque reiciendis quaerat.\",\n         \"isHotfix\": true,\n         \"isPushGCR\": true,\n         \"pipelineEngine\": \"tekton\",\n         \"pluginGitRef\": \"Laboriosam esse dicta.\",\n         \"product\": \"tidb\",\n         \"productBaseImg\": \"Tempore ut dolores.\",\n         \"productDockerfile\": \"Iusto suscipit.\",\n         \"targetImg\": \"Et aut error doloremque non itaque.\",\n         \"version\": \"Voluptas quia reprehenderit fugit quo debitis numquam.\"\n      }\n   }'")
		}
		if body.Request == nil {
			err = goa.MergeErrors(err, goa.MissingFieldError("request", "body"))
		}
		err = goa.MergeErrors(err, goa.ValidateFormat("body.createdBy", body.CreatedBy, goa.FormatEmail))
		if body.Request != nil {
			if err2 := ValidateDevBuildRequestRequestBody(body.Request); err2 != nil {
				err = goa.MergeErrors(err, err2)
			}
		}
		if err != nil {
			return nil, err
		}
	}
	var dryrun bool
	{
		if devbuildCreateDryrun != "" {
			dryrun, err = strconv.ParseBool(devbuildCreateDryrun)
			if err != nil {
				return nil, fmt.Errorf("invalid value for dryrun, must be BOOL")
			}
		}
	}
	v := &devbuild.CreatePayload{
		CreatedBy: body.CreatedBy,
	}
	if body.Request != nil {
		v.Request = marshalDevBuildRequestRequestBodyToDevbuildDevBuildRequest(body.Request)
	}
	v.Dryrun = dryrun

	return v, nil
}

// BuildGetPayload builds the payload for the devbuild get endpoint from CLI
// flags.
func BuildGetPayload(devbuildGetID string, devbuildGetSync string) (*devbuild.GetPayload, error) {
	var err error
	var id int
	{
		var v int64
		v, err = strconv.ParseInt(devbuildGetID, 10, strconv.IntSize)
		id = int(v)
		if err != nil {
			return nil, fmt.Errorf("invalid value for id, must be INT")
		}
	}
	var sync bool
	{
		if devbuildGetSync != "" {
			sync, err = strconv.ParseBool(devbuildGetSync)
			if err != nil {
				return nil, fmt.Errorf("invalid value for sync, must be BOOL")
			}
		}
	}
	v := &devbuild.GetPayload{}
	v.ID = id
	v.Sync = sync

	return v, nil
}

// BuildUpdatePayload builds the payload for the devbuild update endpoint from
// CLI flags.
func BuildUpdatePayload(devbuildUpdateBody string, devbuildUpdateID string, devbuildUpdateDryrun string) (*devbuild.UpdatePayload, error) {
	var err error
	var body UpdateRequestBody
	{
		err = json.Unmarshal([]byte(devbuildUpdateBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"DevBuild\": {\n         \"id\": 8670468037696883245,\n         \"meta\": {\n            \"createdAt\": \"Nihil soluta aut adipisci est.\",\n            \"createdBy\": \"Qui necessitatibus possimus ab quos facere.\",\n            \"updatedAt\": \"Repudiandae voluptatem rem earum aut at nulla.\"\n         },\n         \"spec\": {\n            \"buildEnv\": \"Natus totam esse maxime aliquid sunt.\",\n            \"builderImg\": \"At illo voluptas dolor.\",\n            \"edition\": \"community\",\n            \"features\": \"Beatae sunt nesciunt amet autem.\",\n            \"gitHash\": \"Sit accusamus aspernatur aut laboriosam.\",\n            \"gitRef\": \"Perspiciatis perspiciatis atque inventore id.\",\n            \"githubRepo\": \"Ut libero magnam sapiente dolores qui.\",\n            \"isHotfix\": false,\n            \"isPushGCR\": true,\n            \"pipelineEngine\": \"jenkins\",\n            \"pluginGitRef\": \"Deleniti at consequatur doloribus culpa velit et.\",\n            \"product\": \"pd\",\n            \"productBaseImg\": \"Voluptas hic.\",\n            \"productDockerfile\": \"Ut eum iusto id officiis.\",\n            \"targetImg\": \"Laboriosam ut perspiciatis porro.\",\n            \"version\": \"Distinctio aliquid eum.\"\n         },\n         \"status\": {\n            \"buildReport\": {\n               \"binaries\": [\n                  {\n                     \"component\": \"Neque velit maiores culpa rerum accusamus.\",\n                     \"ociFile\": {\n                        \"file\": \"Consectetur et officia necessitatibus et necessitatibus sint.\",\n                        \"repo\": \"Enim minima et vel qui nulla qui.\",\n                        \"tag\": \"Maiores aut rerum.\"\n                     },\n                     \"platform\": \"Similique nesciunt dolorum quisquam qui odio.\",\n                     \"sha256OciFile\": {\n                        \"file\": \"Consectetur et officia necessitatibus et necessitatibus sint.\",\n                        \"repo\": \"Enim minima et vel qui nulla qui.\",\n                        \"tag\": \"Maiores aut rerum.\"\n                     },\n                     \"sha256URL\": \"Praesentium facilis corrupti ullam impedit incidunt.\",\n                     \"url\": \"Aut quas pariatur qui.\"\n                  },\n                  {\n                     \"component\": \"Neque velit maiores culpa rerum accusamus.\",\n                     \"ociFile\": {\n                        \"file\": \"Consectetur et officia necessitatibus et necessitatibus sint.\",\n                        \"repo\": \"Enim minima et vel qui nulla qui.\",\n                        \"tag\": \"Maiores aut rerum.\"\n                     },\n                     \"platform\": \"Similique nesciunt dolorum quisquam qui odio.\",\n                     \"sha256OciFile\": {\n                        \"file\": \"Consectetur et officia necessitatibus et necessitatibus sint.\",\n                        \"repo\": \"Enim minima et vel qui nulla qui.\",\n                        \"tag\": \"Maiores aut rerum.\"\n                     },\n                     \"sha256URL\": \"Praesentium facilis corrupti ullam impedit incidunt.\",\n                     \"url\": \"Aut quas pariatur qui.\"\n                  }\n               ],\n               \"gitHash\": \"Harum repellat qui eos est velit.\",\n               \"images\": [\n                  {\n                     \"platform\": \"Ut rerum dolorum aspernatur necessitatibus.\",\n                     \"url\": \"Laborum iste nobis omnis quae.\"\n                  },\n                  {\n                     \"platform\": \"Ut rerum dolorum aspernatur necessitatibus.\",\n                     \"url\": \"Laborum iste nobis omnis quae.\"\n                  },\n                  {\n                     \"platform\": \"Ut rerum dolorum aspernatur necessitatibus.\",\n                     \"url\": \"Laborum iste nobis omnis quae.\"\n                  },\n                  {\n                     \"platform\": \"Ut rerum dolorum aspernatur necessitatibus.\",\n                     \"url\": \"Laborum iste nobis omnis quae.\"\n                  }\n               ],\n               \"pluginGitHash\": \"Assumenda itaque necessitatibus eligendi qui qui illum.\",\n               \"printedVersion\": \"Aliquam quia eum quia id qui.\"\n            },\n            \"errMsg\": \"Fugiat sint aut minus aperiam quod.\",\n            \"pipelineBuildID\": 6941289464511149,\n            \"pipelineEndAt\": \"Deleniti natus reprehenderit nihil animi hic fugiat.\",\n            \"pipelineStartAt\": \"Accusamus velit ipsam.\",\n            \"pipelineViewURL\": \"Enim harum dolorum.\",\n            \"pipelineViewURLs\": [\n               \"Illo blanditiis totam in.\",\n               \"Dignissimos tempore aut.\"\n            ],\n            \"status\": \"PENDING\",\n            \"tektonStatus\": {\n               \"pipelines\": [\n                  {\n                     \"endAt\": \"Excepturi ipsa veniam aspernatur quae.\",\n                     \"gitHash\": \"Voluptatem enim aliquam.\",\n                     \"images\": [\n                        {\n                           \"platform\": \"Ut rerum dolorum aspernatur necessitatibus.\",\n                           \"url\": \"Laborum iste nobis omnis quae.\"\n                        },\n                        {\n                           \"platform\": \"Ut rerum dolorum aspernatur necessitatibus.\",\n                           \"url\": \"Laborum iste nobis omnis quae.\"\n                        },\n                        {\n                           \"platform\": \"Ut rerum dolorum aspernatur necessitatibus.\",\n                           \"url\": \"Laborum iste nobis omnis quae.\"\n                        },\n                        {\n                           \"platform\": \"Ut rerum dolorum aspernatur necessitatibus.\",\n                           \"url\": \"Laborum iste nobis omnis quae.\"\n                        }\n                     ],\n                     \"name\": \"Dolores id quibusdam impedit corrupti veritatis.\",\n                     \"ociArtifacts\": [\n                        {\n                           \"files\": [\n                              \"Temporibus totam quae debitis odio hic.\",\n                              \"Atque eos consequatur laudantium.\",\n                              \"Vitae iste.\",\n                              \"Odit blanditiis magni eaque quas eos voluptatem.\"\n                           ],\n                           \"repo\": \"Quam necessitatibus optio ipsam autem vel veniam.\",\n                           \"tag\": \"Provident qui.\"\n                        },\n                        {\n                           \"files\": [\n                              \"Temporibus totam quae debitis odio hic.\",\n                              \"Atque eos consequatur laudantium.\",\n                              \"Vitae iste.\",\n                              \"Odit blanditiis magni eaque quas eos voluptatem.\"\n                           ],\n                           \"repo\": \"Quam necessitatibus optio ipsam autem vel veniam.\",\n                           \"tag\": \"Provident qui.\"\n                        },\n                        {\n                           \"files\": [\n                              \"Temporibus totam quae debitis odio hic.\",\n                              \"Atque eos consequatur laudantium.\",\n                              \"Vitae iste.\",\n                              \"Odit blanditiis magni eaque quas eos voluptatem.\"\n                           ],\n                           \"repo\": \"Quam necessitatibus optio ipsam autem vel veniam.\",\n                           \"tag\": \"Provident qui.\"\n                        }\n                     ],\n                     \"platform\": \"Quis quia vitae non ratione.\",\n                     \"startAt\": \"Minus sapiente doloremque rerum quasi.\",\n                     \"status\": \"PROCESSING\",\n                     \"url\": \"Saepe rerum tenetur vero eveniet.\"\n                  },\n                  {\n                     \"endAt\": \"Excepturi ipsa veniam aspernatur quae.\",\n                     \"gitHash\": \"Voluptatem enim aliquam.\",\n                     \"images\": [\n                        {\n                           \"platform\": \"Ut rerum dolorum aspernatur necessitatibus.\",\n                           \"url\": \"Laborum iste nobis omnis quae.\"\n                        },\n                        {\n                           \"platform\": \"Ut rerum dolorum aspernatur necessitatibus.\",\n                           \"url\": \"Laborum iste nobis omnis quae.\"\n                        },\n                        {\n                           \"platform\": \"Ut rerum dolorum aspernatur necessitatibus.\",\n                           \"url\": \"Laborum iste nobis omnis quae.\"\n                        },\n                        {\n                           \"platform\": \"Ut rerum dolorum aspernatur necessitatibus.\",\n                           \"url\": \"Laborum iste nobis omnis quae.\"\n                        }\n                     ],\n                     \"name\": \"Dolores id quibusdam impedit corrupti veritatis.\",\n                     \"ociArtifacts\": [\n                        {\n                           \"files\": [\n                              \"Temporibus totam quae debitis odio hic.\",\n                              \"Atque eos consequatur laudantium.\",\n                              \"Vitae iste.\",\n                              \"Odit blanditiis magni eaque quas eos voluptatem.\"\n                           ],\n                           \"repo\": \"Quam necessitatibus optio ipsam autem vel veniam.\",\n                           \"tag\": \"Provident qui.\"\n                        },\n                        {\n                           \"files\": [\n                              \"Temporibus totam quae debitis odio hic.\",\n                              \"Atque eos consequatur laudantium.\",\n                              \"Vitae iste.\",\n                              \"Odit blanditiis magni eaque quas eos voluptatem.\"\n                           ],\n                           \"repo\": \"Quam necessitatibus optio ipsam autem vel veniam.\",\n                           \"tag\": \"Provident qui.\"\n                        },\n                        {\n                           \"files\": [\n                              \"Temporibus totam quae debitis odio hic.\",\n                              \"Atque eos consequatur laudantium.\",\n                              \"Vitae iste.\",\n                              \"Odit blanditiis magni eaque quas eos voluptatem.\"\n                           ],\n                           \"repo\": \"Quam necessitatibus optio ipsam autem vel veniam.\",\n                           \"tag\": \"Provident qui.\"\n                        }\n                     ],\n                     \"platform\": \"Quis quia vitae non ratione.\",\n                     \"startAt\": \"Minus sapiente doloremque rerum quasi.\",\n                     \"status\": \"PROCESSING\",\n                     \"url\": \"Saepe rerum tenetur vero eveniet.\"\n                  },\n                  {\n                     \"endAt\": \"Excepturi ipsa veniam aspernatur quae.\",\n                     \"gitHash\": \"Voluptatem enim aliquam.\",\n                     \"images\": [\n                        {\n                           \"platform\": \"Ut rerum dolorum aspernatur necessitatibus.\",\n                           \"url\": \"Laborum iste nobis omnis quae.\"\n                        },\n                        {\n                           \"platform\": \"Ut rerum dolorum aspernatur necessitatibus.\",\n                           \"url\": \"Laborum iste nobis omnis quae.\"\n                        },\n                        {\n                           \"platform\": \"Ut rerum dolorum aspernatur necessitatibus.\",\n                           \"url\": \"Laborum iste nobis omnis quae.\"\n                        },\n                        {\n                           \"platform\": \"Ut rerum dolorum aspernatur necessitatibus.\",\n                           \"url\": \"Laborum iste nobis omnis quae.\"\n                        }\n                     ],\n                     \"name\": \"Dolores id quibusdam impedit corrupti veritatis.\",\n                     \"ociArtifacts\": [\n                        {\n                           \"files\": [\n                              \"Temporibus totam quae debitis odio hic.\",\n                              \"Atque eos consequatur laudantium.\",\n                              \"Vitae iste.\",\n                              \"Odit blanditiis magni eaque quas eos voluptatem.\"\n                           ],\n                           \"repo\": \"Quam necessitatibus optio ipsam autem vel veniam.\",\n                           \"tag\": \"Provident qui.\"\n                        },\n                        {\n                           \"files\": [\n                              \"Temporibus totam quae debitis odio hic.\",\n                              \"Atque eos consequatur laudantium.\",\n                              \"Vitae iste.\",\n                              \"Odit blanditiis magni eaque quas eos voluptatem.\"\n                           ],\n                           \"repo\": \"Quam necessitatibus optio ipsam autem vel veniam.\",\n                           \"tag\": \"Provident qui.\"\n                        },\n                        {\n                           \"files\": [\n                              \"Temporibus totam quae debitis odio hic.\",\n                              \"Atque eos consequatur laudantium.\",\n                              \"Vitae iste.\",\n                              \"Odit blanditiis magni eaque quas eos voluptatem.\"\n                           ],\n                           \"repo\": \"Quam necessitatibus optio ipsam autem vel veniam.\",\n                           \"tag\": \"Provident qui.\"\n                        }\n                     ],\n                     \"platform\": \"Quis quia vitae non ratione.\",\n                     \"startAt\": \"Minus sapiente doloremque rerum quasi.\",\n                     \"status\": \"PROCESSING\",\n                     \"url\": \"Saepe rerum tenetur vero eveniet.\"\n                  }\n               ]\n            }\n         }\n      }\n   }'")
		}
		if body.DevBuild == nil {
			err = goa.MergeErrors(err, goa.MissingFieldError("DevBuild", "body"))
		}
		if body.DevBuild != nil {
			if err2 := ValidateDevBuildRequestBody(body.DevBuild); err2 != nil {
				err = goa.MergeErrors(err, err2)
			}
		}
		if err != nil {
			return nil, err
		}
	}
	var id int
	{
		var v int64
		v, err = strconv.ParseInt(devbuildUpdateID, 10, strconv.IntSize)
		id = int(v)
		if err != nil {
			return nil, fmt.Errorf("invalid value for id, must be INT")
		}
	}
	var dryrun bool
	{
		if devbuildUpdateDryrun != "" {
			dryrun, err = strconv.ParseBool(devbuildUpdateDryrun)
			if err != nil {
				return nil, fmt.Errorf("invalid value for dryrun, must be BOOL")
			}
		}
	}
	v := &devbuild.UpdatePayload{}
	if body.DevBuild != nil {
		v.DevBuild = marshalDevBuildRequestBodyToDevbuildDevBuild(body.DevBuild)
	}
	v.ID = id
	v.Dryrun = dryrun

	return v, nil
}

// BuildRerunPayload builds the payload for the devbuild rerun endpoint from
// CLI flags.
func BuildRerunPayload(devbuildRerunID string, devbuildRerunDryrun string) (*devbuild.RerunPayload, error) {
	var err error
	var id int
	{
		var v int64
		v, err = strconv.ParseInt(devbuildRerunID, 10, strconv.IntSize)
		id = int(v)
		if err != nil {
			return nil, fmt.Errorf("invalid value for id, must be INT")
		}
	}
	var dryrun bool
	{
		if devbuildRerunDryrun != "" {
			dryrun, err = strconv.ParseBool(devbuildRerunDryrun)
			if err != nil {
				return nil, fmt.Errorf("invalid value for dryrun, must be BOOL")
			}
		}
	}
	v := &devbuild.RerunPayload{}
	v.ID = id
	v.Dryrun = dryrun

	return v, nil
}
