// Code generated by goa v3.20.0, DO NOT EDIT.
//
// devbuild HTTP client CLI support package
//
// Command:
// $ goa gen github.com/PingCAP-QE/ee-apps/tibuild/design

package client

import (
	"encoding/json"
	"fmt"
	"strconv"

	devbuild "github.com/PingCAP-QE/ee-apps/tibuild/gen/devbuild"
	goa "goa.design/goa/v3/pkg"
)

// BuildListPayload builds the payload for the devbuild list endpoint from CLI
// flags.
func BuildListPayload(devbuildListBody string, devbuildListPage string, devbuildListPageSize string, devbuildListHotfix string, devbuildListCreatedBy string) (*devbuild.ListPayload, error) {
	var err error
	var body ListRequestBody
	{
		err = json.Unmarshal([]byte(devbuildListBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"direction\": \"desc\",\n      \"per_page\": 9048917590767144830,\n      \"sort\": \"updatedAt\"\n   }'")
		}
	}
	var page int
	{
		if devbuildListPage != "" {
			var v int64
			v, err = strconv.ParseInt(devbuildListPage, 10, strconv.IntSize)
			page = int(v)
			if err != nil {
				return nil, fmt.Errorf("invalid value for page, must be INT")
			}
		}
	}
	var pageSize *int32
	{
		if devbuildListPageSize != "" {
			var v int64
			v, err = strconv.ParseInt(devbuildListPageSize, 10, 32)
			val := int32(v)
			pageSize = &val
			if err != nil {
				return nil, fmt.Errorf("invalid value for pageSize, must be INT32")
			}
		}
	}
	var hotfix *bool
	{
		if devbuildListHotfix != "" {
			var val bool
			val, err = strconv.ParseBool(devbuildListHotfix)
			hotfix = &val
			if err != nil {
				return nil, fmt.Errorf("invalid value for hotfix, must be BOOL")
			}
		}
	}
	var createdBy *string
	{
		if devbuildListCreatedBy != "" {
			createdBy = &devbuildListCreatedBy
		}
	}
	v := &devbuild.ListPayload{
		PerPage:   body.PerPage,
		Sort:      body.Sort,
		Direction: body.Direction,
	}
	{
		var zero int
		if v.PerPage == zero {
			v.PerPage = 10
		}
	}
	{
		var zero string
		if v.Sort == zero {
			v.Sort = "createdAt"
		}
	}
	{
		var zero string
		if v.Direction == zero {
			v.Direction = "desc"
		}
	}
	v.Page = page
	v.PageSize = pageSize
	v.Hotfix = hotfix
	v.CreatedBy = createdBy

	return v, nil
}

// BuildCreatePayload builds the payload for the devbuild create endpoint from
// CLI flags.
func BuildCreatePayload(devbuildCreateBody string, devbuildCreateDryrun string) (*devbuild.CreatePayload, error) {
	var err error
	var body CreateRequestBody
	{
		err = json.Unmarshal([]byte(devbuildCreateBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"createdBy\": \"jordi@feest.name\",\n      \"request\": {\n         \"buildEnv\": \"Ad numquam neque reiciendis quaerat maiores.\",\n         \"builderImg\": \"Ea est laboriosam esse dicta.\",\n         \"edition\": \"enterprise\",\n         \"features\": \"Tempore ut dolores.\",\n         \"gitRef\": \"Iusto suscipit.\",\n         \"githubRepo\": \"Et aut error doloremque non itaque.\",\n         \"isHotfix\": true,\n         \"isPushGCR\": false,\n         \"pipelineEngine\": \"jenkins\",\n         \"pluginGitRef\": \"Fugit quo debitis numquam consequuntur qui.\",\n         \"product\": \"tidb-binlog\",\n         \"productBaseImg\": \"Pariatur aspernatur sed.\",\n         \"productDockerfile\": \"Nostrum autem.\",\n         \"targetImg\": \"Odit consequatur dolores provident unde non.\",\n         \"version\": \"Quo omnis.\"\n      }\n   }'")
		}
		if body.Request == nil {
			err = goa.MergeErrors(err, goa.MissingFieldError("request", "body"))
		}
		err = goa.MergeErrors(err, goa.ValidateFormat("body.createdBy", body.CreatedBy, goa.FormatEmail))
		if body.Request != nil {
			if err2 := ValidateDevBuildRequestRequestBody(body.Request); err2 != nil {
				err = goa.MergeErrors(err, err2)
			}
		}
		if err != nil {
			return nil, err
		}
	}
	var dryrun bool
	{
		if devbuildCreateDryrun != "" {
			dryrun, err = strconv.ParseBool(devbuildCreateDryrun)
			if err != nil {
				return nil, fmt.Errorf("invalid value for dryrun, must be BOOL")
			}
		}
	}
	v := &devbuild.CreatePayload{
		CreatedBy: body.CreatedBy,
	}
	if body.Request != nil {
		v.Request = marshalDevBuildRequestRequestBodyToDevbuildDevBuildRequest(body.Request)
	}
	v.Dryrun = dryrun

	return v, nil
}

// BuildGetPayload builds the payload for the devbuild get endpoint from CLI
// flags.
func BuildGetPayload(devbuildGetID string, devbuildGetSync string) (*devbuild.GetPayload, error) {
	var err error
	var id int
	{
		var v int64
		v, err = strconv.ParseInt(devbuildGetID, 10, strconv.IntSize)
		id = int(v)
		if err != nil {
			return nil, fmt.Errorf("invalid value for id, must be INT")
		}
	}
	var sync bool
	{
		if devbuildGetSync != "" {
			sync, err = strconv.ParseBool(devbuildGetSync)
			if err != nil {
				return nil, fmt.Errorf("invalid value for sync, must be BOOL")
			}
		}
	}
	v := &devbuild.GetPayload{}
	v.ID = id
	v.Sync = sync

	return v, nil
}

// BuildUpdatePayload builds the payload for the devbuild update endpoint from
// CLI flags.
func BuildUpdatePayload(devbuildUpdateBody string, devbuildUpdateID string, devbuildUpdateDryrun string) (*devbuild.UpdatePayload, error) {
	var err error
	var body UpdateRequestBody
	{
		err = json.Unmarshal([]byte(devbuildUpdateBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"DevBuild\": {\n         \"id\": 3012638057134265735,\n         \"meta\": {\n            \"createdAt\": \"Aut natus.\",\n            \"createdBy\": \"Esse maxime aliquid sunt numquam at illo.\",\n            \"updatedAt\": \"Dolor atque cum beatae sunt nesciunt amet.\"\n         },\n         \"spec\": {\n            \"buildEnv\": \"Accusantium sit accusamus aspernatur aut laboriosam aspernatur.\",\n            \"builderImg\": \"Perspiciatis atque.\",\n            \"edition\": \"community\",\n            \"features\": \"Nemo ut libero magnam sapiente.\",\n            \"gitHash\": \"Qui voluptates velit ducimus in.\",\n            \"gitRef\": \"At consequatur doloribus culpa velit et id.\",\n            \"githubRepo\": \"Voluptas hic.\",\n            \"isHotfix\": false,\n            \"isPushGCR\": false,\n            \"pipelineEngine\": \"jenkins\",\n            \"pluginGitRef\": \"Id officiis quidem laboriosam ut.\",\n            \"product\": \"ticdc-newarch\",\n            \"productBaseImg\": \"Libero distinctio aliquid eum sed reprehenderit.\",\n            \"productDockerfile\": \"Velit maiores culpa.\",\n            \"targetImg\": \"Accusamus in consectetur.\",\n            \"version\": \"Officia necessitatibus et.\"\n         },\n         \"status\": {\n            \"buildReport\": {\n               \"binaries\": [\n                  {\n                     \"component\": \"Fuga enim minima et vel.\",\n                     \"ociFile\": {\n                        \"file\": \"Nulla qui quod maiores.\",\n                        \"repo\": \"Rerum quod similique nesciunt.\",\n                        \"tag\": \"Quisquam qui odio.\"\n                     },\n                     \"platform\": \"Praesentium facilis corrupti ullam impedit incidunt.\",\n                     \"sha256OciFile\": {\n                        \"file\": \"Nulla qui quod maiores.\",\n                        \"repo\": \"Rerum quod similique nesciunt.\",\n                        \"tag\": \"Quisquam qui odio.\"\n                     },\n                     \"sha256URL\": \"Aut quas pariatur qui.\",\n                     \"url\": \"Harum repellat qui eos est velit.\"\n                  },\n                  {\n                     \"component\": \"Fuga enim minima et vel.\",\n                     \"ociFile\": {\n                        \"file\": \"Nulla qui quod maiores.\",\n                        \"repo\": \"Rerum quod similique nesciunt.\",\n                        \"tag\": \"Quisquam qui odio.\"\n                     },\n                     \"platform\": \"Praesentium facilis corrupti ullam impedit incidunt.\",\n                     \"sha256OciFile\": {\n                        \"file\": \"Nulla qui quod maiores.\",\n                        \"repo\": \"Rerum quod similique nesciunt.\",\n                        \"tag\": \"Quisquam qui odio.\"\n                     },\n                     \"sha256URL\": \"Aut quas pariatur qui.\",\n                     \"url\": \"Harum repellat qui eos est velit.\"\n                  },\n                  {\n                     \"component\": \"Fuga enim minima et vel.\",\n                     \"ociFile\": {\n                        \"file\": \"Nulla qui quod maiores.\",\n                        \"repo\": \"Rerum quod similique nesciunt.\",\n                        \"tag\": \"Quisquam qui odio.\"\n                     },\n                     \"platform\": \"Praesentium facilis corrupti ullam impedit incidunt.\",\n                     \"sha256OciFile\": {\n                        \"file\": \"Nulla qui quod maiores.\",\n                        \"repo\": \"Rerum quod similique nesciunt.\",\n                        \"tag\": \"Quisquam qui odio.\"\n                     },\n                     \"sha256URL\": \"Aut quas pariatur qui.\",\n                     \"url\": \"Harum repellat qui eos est velit.\"\n                  },\n                  {\n                     \"component\": \"Fuga enim minima et vel.\",\n                     \"ociFile\": {\n                        \"file\": \"Nulla qui quod maiores.\",\n                        \"repo\": \"Rerum quod similique nesciunt.\",\n                        \"tag\": \"Quisquam qui odio.\"\n                     },\n                     \"platform\": \"Praesentium facilis corrupti ullam impedit incidunt.\",\n                     \"sha256OciFile\": {\n                        \"file\": \"Nulla qui quod maiores.\",\n                        \"repo\": \"Rerum quod similique nesciunt.\",\n                        \"tag\": \"Quisquam qui odio.\"\n                     },\n                     \"sha256URL\": \"Aut quas pariatur qui.\",\n                     \"url\": \"Harum repellat qui eos est velit.\"\n                  }\n               ],\n               \"gitHash\": \"Iusto ut rerum dolorum.\",\n               \"images\": [\n                  {\n                     \"platform\": \"Molestias laborum iste nobis omnis quae qui.\",\n                     \"url\": \"Itaque necessitatibus eligendi qui qui illum nemo.\"\n                  },\n                  {\n                     \"platform\": \"Molestias laborum iste nobis omnis quae qui.\",\n                     \"url\": \"Itaque necessitatibus eligendi qui qui illum nemo.\"\n                  },\n                  {\n                     \"platform\": \"Molestias laborum iste nobis omnis quae qui.\",\n                     \"url\": \"Itaque necessitatibus eligendi qui qui illum nemo.\"\n                  },\n                  {\n                     \"platform\": \"Molestias laborum iste nobis omnis quae qui.\",\n                     \"url\": \"Itaque necessitatibus eligendi qui qui illum nemo.\"\n                  }\n               ],\n               \"pluginGitHash\": \"Quia eum quia id qui.\",\n               \"printedVersion\": \"Fugiat sint aut minus aperiam quod.\"\n            },\n            \"errMsg\": \"Eum deleniti natus reprehenderit.\",\n            \"pipelineBuildID\": 4890831179185763276,\n            \"pipelineEndAt\": \"Hic fugiat et accusamus velit ipsam voluptatum.\",\n            \"pipelineStartAt\": \"Harum dolorum natus quia illo blanditiis totam.\",\n            \"pipelineViewURL\": \"Beatae dignissimos tempore aut placeat rerum dicta.\",\n            \"pipelineViewURLs\": [\n               \"Veniam aspernatur quae.\",\n               \"Voluptatem enim aliquam.\",\n               \"Neque dolores.\"\n            ],\n            \"status\": \"ERROR\",\n            \"tektonStatus\": {\n               \"pipelines\": [\n                  {\n                     \"endAt\": \"Corrupti veritatis ut quisquam.\",\n                     \"gitHash\": \"Temporibus totam quae debitis odio hic.\",\n                     \"images\": [\n                        {\n                           \"platform\": \"Molestias laborum iste nobis omnis quae qui.\",\n                           \"url\": \"Itaque necessitatibus eligendi qui qui illum nemo.\"\n                        },\n                        {\n                           \"platform\": \"Molestias laborum iste nobis omnis quae qui.\",\n                           \"url\": \"Itaque necessitatibus eligendi qui qui illum nemo.\"\n                        }\n                     ],\n                     \"name\": \"Eos consequatur laudantium aut vitae.\",\n                     \"ociArtifacts\": [\n                        {\n                           \"files\": [\n                              \"Blanditiis magni eaque quas.\",\n                              \"Voluptatem quia quam.\",\n                              \"Optio ipsam autem vel veniam et provident.\",\n                              \"Dolores quis quia vitae non.\"\n                           ],\n                           \"repo\": \"Reiciendis minus.\",\n                           \"tag\": \"Doloremque rerum quasi consequatur repellendus saepe rerum.\"\n                        },\n                        {\n                           \"files\": [\n                              \"Blanditiis magni eaque quas.\",\n                              \"Voluptatem quia quam.\",\n                              \"Optio ipsam autem vel veniam et provident.\",\n                              \"Dolores quis quia vitae non.\"\n                           ],\n                           \"repo\": \"Reiciendis minus.\",\n                           \"tag\": \"Doloremque rerum quasi consequatur repellendus saepe rerum.\"\n                        },\n                        {\n                           \"files\": [\n                              \"Blanditiis magni eaque quas.\",\n                              \"Voluptatem quia quam.\",\n                              \"Optio ipsam autem vel veniam et provident.\",\n                              \"Dolores quis quia vitae non.\"\n                           ],\n                           \"repo\": \"Reiciendis minus.\",\n                           \"tag\": \"Doloremque rerum quasi consequatur repellendus saepe rerum.\"\n                        },\n                        {\n                           \"files\": [\n                              \"Blanditiis magni eaque quas.\",\n                              \"Voluptatem quia quam.\",\n                              \"Optio ipsam autem vel veniam et provident.\",\n                              \"Dolores quis quia vitae non.\"\n                           ],\n                           \"repo\": \"Reiciendis minus.\",\n                           \"tag\": \"Doloremque rerum quasi consequatur repellendus saepe rerum.\"\n                        }\n                     ],\n                     \"platform\": \"Vero eveniet.\",\n                     \"startAt\": \"Nulla et saepe ratione est ut.\",\n                     \"status\": \"SUCCESS\",\n                     \"url\": \"Vitae sapiente nihil earum sint ad incidunt.\"\n                  },\n                  {\n                     \"endAt\": \"Corrupti veritatis ut quisquam.\",\n                     \"gitHash\": \"Temporibus totam quae debitis odio hic.\",\n                     \"images\": [\n                        {\n                           \"platform\": \"Molestias laborum iste nobis omnis quae qui.\",\n                           \"url\": \"Itaque necessitatibus eligendi qui qui illum nemo.\"\n                        },\n                        {\n                           \"platform\": \"Molestias laborum iste nobis omnis quae qui.\",\n                           \"url\": \"Itaque necessitatibus eligendi qui qui illum nemo.\"\n                        }\n                     ],\n                     \"name\": \"Eos consequatur laudantium aut vitae.\",\n                     \"ociArtifacts\": [\n                        {\n                           \"files\": [\n                              \"Blanditiis magni eaque quas.\",\n                              \"Voluptatem quia quam.\",\n                              \"Optio ipsam autem vel veniam et provident.\",\n                              \"Dolores quis quia vitae non.\"\n                           ],\n                           \"repo\": \"Reiciendis minus.\",\n                           \"tag\": \"Doloremque rerum quasi consequatur repellendus saepe rerum.\"\n                        },\n                        {\n                           \"files\": [\n                              \"Blanditiis magni eaque quas.\",\n                              \"Voluptatem quia quam.\",\n                              \"Optio ipsam autem vel veniam et provident.\",\n                              \"Dolores quis quia vitae non.\"\n                           ],\n                           \"repo\": \"Reiciendis minus.\",\n                           \"tag\": \"Doloremque rerum quasi consequatur repellendus saepe rerum.\"\n                        },\n                        {\n                           \"files\": [\n                              \"Blanditiis magni eaque quas.\",\n                              \"Voluptatem quia quam.\",\n                              \"Optio ipsam autem vel veniam et provident.\",\n                              \"Dolores quis quia vitae non.\"\n                           ],\n                           \"repo\": \"Reiciendis minus.\",\n                           \"tag\": \"Doloremque rerum quasi consequatur repellendus saepe rerum.\"\n                        },\n                        {\n                           \"files\": [\n                              \"Blanditiis magni eaque quas.\",\n                              \"Voluptatem quia quam.\",\n                              \"Optio ipsam autem vel veniam et provident.\",\n                              \"Dolores quis quia vitae non.\"\n                           ],\n                           \"repo\": \"Reiciendis minus.\",\n                           \"tag\": \"Doloremque rerum quasi consequatur repellendus saepe rerum.\"\n                        }\n                     ],\n                     \"platform\": \"Vero eveniet.\",\n                     \"startAt\": \"Nulla et saepe ratione est ut.\",\n                     \"status\": \"SUCCESS\",\n                     \"url\": \"Vitae sapiente nihil earum sint ad incidunt.\"\n                  }\n               ]\n            }\n         }\n      }\n   }'")
		}
		if body.DevBuild == nil {
			err = goa.MergeErrors(err, goa.MissingFieldError("DevBuild", "body"))
		}
		if body.DevBuild != nil {
			if err2 := ValidateDevBuildRequestBody(body.DevBuild); err2 != nil {
				err = goa.MergeErrors(err, err2)
			}
		}
		if err != nil {
			return nil, err
		}
	}
	var id int
	{
		var v int64
		v, err = strconv.ParseInt(devbuildUpdateID, 10, strconv.IntSize)
		id = int(v)
		if err != nil {
			return nil, fmt.Errorf("invalid value for id, must be INT")
		}
	}
	var dryrun bool
	{
		if devbuildUpdateDryrun != "" {
			dryrun, err = strconv.ParseBool(devbuildUpdateDryrun)
			if err != nil {
				return nil, fmt.Errorf("invalid value for dryrun, must be BOOL")
			}
		}
	}
	v := &devbuild.UpdatePayload{}
	if body.DevBuild != nil {
		v.DevBuild = marshalDevBuildRequestBodyToDevbuildDevBuild(body.DevBuild)
	}
	v.ID = id
	v.Dryrun = dryrun

	return v, nil
}

// BuildRerunPayload builds the payload for the devbuild rerun endpoint from
// CLI flags.
func BuildRerunPayload(devbuildRerunID string, devbuildRerunDryrun string) (*devbuild.RerunPayload, error) {
	var err error
	var id int
	{
		var v int64
		v, err = strconv.ParseInt(devbuildRerunID, 10, strconv.IntSize)
		id = int(v)
		if err != nil {
			return nil, fmt.Errorf("invalid value for id, must be INT")
		}
	}
	var dryrun bool
	{
		if devbuildRerunDryrun != "" {
			dryrun, err = strconv.ParseBool(devbuildRerunDryrun)
			if err != nil {
				return nil, fmt.Errorf("invalid value for dryrun, must be BOOL")
			}
		}
	}
	v := &devbuild.RerunPayload{}
	v.ID = id
	v.Dryrun = dryrun

	return v, nil
}
