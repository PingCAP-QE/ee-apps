// Code generated by goa v3.20.0, DO NOT EDIT.
//
// hotfix HTTP server types
//
// Command:
// $ goa gen github.com/PingCAP-QE/ee-apps/tibuild/internal/service/design -o
// ./service

package server

import (
	hotfix "github.com/PingCAP-QE/ee-apps/tibuild/internal/service/gen/hotfix"
	goa "goa.design/goa/v3/pkg"
)

// CreateTagRequestBody is the type of the "hotfix" service "createTag"
// endpoint HTTP request body.
type CreateTagRequestBody struct {
	// Full name of GitHub repository (e.g., 'owner/repo')
	Repo *string `form:"repo,omitempty" json:"repo,omitempty" xml:"repo,omitempty"`
	// Branch name of the GitHub repo
	Branch *string `form:"branch,omitempty" json:"branch,omitempty" xml:"branch,omitempty"`
	// Short or full git commit SHA
	Commit *string `form:"commit,omitempty" json:"commit,omitempty" xml:"commit,omitempty"`
	// GitHub account who requested to create the git tag
	Author *string `form:"author,omitempty" json:"author,omitempty" xml:"author,omitempty"`
}

// CreateTagResponseBody is the type of the "hotfix" service "createTag"
// endpoint HTTP response body.
type CreateTagResponseBody struct {
	// Full name of GitHub repository
	Repo string `form:"repo" json:"repo" xml:"repo"`
	// The commit tag created on
	Commit string `form:"commit" json:"commit" xml:"commit"`
	// Git tag name
	Tag string `form:"tag" json:"tag" xml:"tag"`
}

// CreateTagBadRequestResponseBody is the type of the "hotfix" service
// "createTag" endpoint HTTP response body for the "BadRequest" error.
type CreateTagBadRequestResponseBody struct {
	Code    int    `form:"code" json:"code" xml:"code"`
	Message string `form:"message" json:"message" xml:"message"`
}

// CreateTagInternalServerErrorResponseBody is the type of the "hotfix" service
// "createTag" endpoint HTTP response body for the "InternalServerError" error.
type CreateTagInternalServerErrorResponseBody struct {
	Code    int    `form:"code" json:"code" xml:"code"`
	Message string `form:"message" json:"message" xml:"message"`
}

// NewCreateTagResponseBody builds the HTTP response body from the result of
// the "createTag" endpoint of the "hotfix" service.
func NewCreateTagResponseBody(res *hotfix.HotfixTagResult) *CreateTagResponseBody {
	body := &CreateTagResponseBody{
		Repo:   res.Repo,
		Commit: res.Commit,
		Tag:    res.Tag,
	}
	return body
}

// NewCreateTagBadRequestResponseBody builds the HTTP response body from the
// result of the "createTag" endpoint of the "hotfix" service.
func NewCreateTagBadRequestResponseBody(res *hotfix.HTTPError) *CreateTagBadRequestResponseBody {
	body := &CreateTagBadRequestResponseBody{
		Code:    res.Code,
		Message: res.Message,
	}
	return body
}

// NewCreateTagInternalServerErrorResponseBody builds the HTTP response body
// from the result of the "createTag" endpoint of the "hotfix" service.
func NewCreateTagInternalServerErrorResponseBody(res *hotfix.HTTPError) *CreateTagInternalServerErrorResponseBody {
	body := &CreateTagInternalServerErrorResponseBody{
		Code:    res.Code,
		Message: res.Message,
	}
	return body
}

// NewCreateTagPayload builds a hotfix service createTag endpoint payload.
func NewCreateTagPayload(body *CreateTagRequestBody) *hotfix.CreateTagPayload {
	v := &hotfix.CreateTagPayload{
		Repo:   *body.Repo,
		Branch: body.Branch,
		Commit: body.Commit,
		Author: *body.Author,
	}

	return v
}

// ValidateCreateTagRequestBody runs the validations defined on
// CreateTagRequestBody
func ValidateCreateTagRequestBody(body *CreateTagRequestBody) (err error) {
	if body.Repo == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("repo", "body"))
	}
	if body.Author == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("author", "body"))
	}
	return
}
