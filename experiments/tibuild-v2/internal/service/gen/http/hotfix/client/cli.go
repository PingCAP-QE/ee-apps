// Code generated by goa v3.20.0, DO NOT EDIT.
//
// hotfix HTTP client CLI support package
//
// Command:
// $ goa gen github.com/PingCAP-QE/ee-apps/tibuild/internal/service/design -o
// ./service

package client

import (
	"encoding/json"
	"fmt"

	hotfix "github.com/PingCAP-QE/ee-apps/tibuild/internal/service/gen/hotfix"
)

// BuildBumpTagForTidbxPayload builds the payload for the hotfix
// bump-tag-for-tidbx endpoint from CLI flags.
func BuildBumpTagForTidbxPayload(hotfixBumpTagForTidbxBody string) (*hotfix.BumpTagForTidbxPayload, error) {
	var err error
	var body BumpTagForTidbxRequestBody
	{
		err = json.Unmarshal([]byte(hotfixBumpTagForTidbxBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"author\": \"abc@test.com\",\n      \"branch\": \"release-8.5\",\n      \"commit\": \"abc123def456\",\n      \"meta\": {\n         \"ops_req\": {\n            \"applicant\": \"tidb\",\n            \"change_id\": \"c1\",\n            \"release_id\": \"r1\"\n         }\n      },\n      \"repo\": \"pingcap/tidb\"\n   }'")
		}
	}
	v := &hotfix.BumpTagForTidbxPayload{
		Repo:   body.Repo,
		Branch: body.Branch,
		Commit: body.Commit,
		Author: body.Author,
	}
	if body.Meta != nil {
		v.Meta = marshalTiDBxBumpTagMetaRequestBodyToHotfixTiDBxBumpTagMeta(body.Meta)
	}

	return v, nil
}

// BuildQueryTagOfTidbxPayload builds the payload for the hotfix
// query-tag-of-tidbx endpoint from CLI flags.
func BuildQueryTagOfTidbxPayload(hotfixQueryTagOfTidbxRepo string, hotfixQueryTagOfTidbxTag string) (*hotfix.QueryTagOfTidbxPayload, error) {
	var repo string
	{
		repo = hotfixQueryTagOfTidbxRepo
	}
	var tag string
	{
		tag = hotfixQueryTagOfTidbxTag
	}
	v := &hotfix.QueryTagOfTidbxPayload{}
	v.Repo = repo
	v.Tag = tag

	return v, nil
}
