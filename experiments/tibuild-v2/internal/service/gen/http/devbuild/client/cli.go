// Code generated by goa v3.20.0, DO NOT EDIT.
//
// devbuild HTTP client CLI support package
//
// Command:
// $ goa gen github.com/PingCAP-QE/ee-apps/tibuild/internal/service/design -o
// ./service

package client

import (
	"encoding/json"
	"fmt"
	"strconv"

	devbuild "github.com/PingCAP-QE/ee-apps/tibuild/internal/service/gen/devbuild"
	goa "goa.design/goa/v3/pkg"
)

// BuildListPayload builds the payload for the devbuild list endpoint from CLI
// flags.
func BuildListPayload(devbuildListPage string, devbuildListPageSize string, devbuildListHotfix string, devbuildListSort string, devbuildListDirection string, devbuildListCreatedBy string) (*devbuild.ListPayload, error) {
	var err error
	var page int
	{
		if devbuildListPage != "" {
			var v int64
			v, err = strconv.ParseInt(devbuildListPage, 10, strconv.IntSize)
			page = int(v)
			if err != nil {
				return nil, fmt.Errorf("invalid value for page, must be INT")
			}
		}
	}
	var pageSize int
	{
		if devbuildListPageSize != "" {
			var v int64
			v, err = strconv.ParseInt(devbuildListPageSize, 10, strconv.IntSize)
			pageSize = int(v)
			if err != nil {
				return nil, fmt.Errorf("invalid value for pageSize, must be INT")
			}
		}
	}
	var hotfix bool
	{
		if devbuildListHotfix != "" {
			hotfix, err = strconv.ParseBool(devbuildListHotfix)
			if err != nil {
				return nil, fmt.Errorf("invalid value for hotfix, must be BOOL")
			}
		}
	}
	var sort string
	{
		if devbuildListSort != "" {
			sort = devbuildListSort
			if !(sort == "created_at" || sort == "updated_at") {
				err = goa.MergeErrors(err, goa.InvalidEnumValueError("sort", sort, []any{"created_at", "updated_at"}))
			}
			if err != nil {
				return nil, err
			}
		}
	}
	var direction string
	{
		if devbuildListDirection != "" {
			direction = devbuildListDirection
			if !(direction == "asc" || direction == "desc") {
				err = goa.MergeErrors(err, goa.InvalidEnumValueError("direction", direction, []any{"asc", "desc"}))
			}
			if err != nil {
				return nil, err
			}
		}
	}
	var createdBy *string
	{
		if devbuildListCreatedBy != "" {
			createdBy = &devbuildListCreatedBy
		}
	}
	v := &devbuild.ListPayload{}
	v.Page = page
	v.PageSize = pageSize
	v.Hotfix = hotfix
	v.Sort = sort
	v.Direction = direction
	v.CreatedBy = createdBy

	return v, nil
}

// BuildCreatePayload builds the payload for the devbuild create endpoint from
// CLI flags.
func BuildCreatePayload(devbuildCreateBody string, devbuildCreateDryrun string) (*devbuild.CreatePayload, error) {
	var err error
	var body CreateRequestBody
	{
		err = json.Unmarshal([]byte(devbuildCreateBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"created_by\": \"callie_ankunding@luettgen.net\",\n      \"request\": {\n         \"build_env\": \"Consequuntur fuga tempore.\",\n         \"builder_img\": \"Veniam quia minus odio neque incidunt.\",\n         \"edition\": \"experiment\",\n         \"features\": \"Ea ullam beatae.\",\n         \"git_ref\": \"Omnis voluptas cumque sunt laboriosam velit.\",\n         \"git_sha\": \"Autem natus molestiae quia.\",\n         \"github_repo\": \"Ducimus quia accusantium laborum ipsum nihil eum.\",\n         \"is_hotfix\": false,\n         \"is_push_gcr\": false,\n         \"pipeline_engine\": \"tekton\",\n         \"platform\": \"darwin/amd64\",\n         \"plugin_git_ref\": \"Minus odit qui facere inventore nemo.\",\n         \"product\": \"drainer\",\n         \"product_base_img\": \"Molestiae et repellat quis necessitatibus et.\",\n         \"product_dockerfile\": \"Nisi omnis veritatis assumenda quo dolores enim.\",\n         \"target_img\": \"Qui accusantium voluptatum aut omnis.\",\n         \"version\": \"Sunt esse et impedit voluptatem.\"\n      }\n   }'")
		}
		if body.Request == nil {
			err = goa.MergeErrors(err, goa.MissingFieldError("request", "body"))
		}
		err = goa.MergeErrors(err, goa.ValidateFormat("body.created_by", body.CreatedBy, goa.FormatEmail))
		if body.Request != nil {
			if err2 := ValidateDevBuildSpecRequestBody(body.Request); err2 != nil {
				err = goa.MergeErrors(err, err2)
			}
		}
		if err != nil {
			return nil, err
		}
	}
	var dryrun bool
	{
		if devbuildCreateDryrun != "" {
			dryrun, err = strconv.ParseBool(devbuildCreateDryrun)
			if err != nil {
				return nil, fmt.Errorf("invalid value for dryrun, must be BOOL")
			}
		}
	}
	v := &devbuild.CreatePayload{
		CreatedBy: body.CreatedBy,
	}
	if body.Request != nil {
		v.Request = marshalDevBuildSpecRequestBodyToDevbuildDevBuildSpec(body.Request)
	}
	v.Dryrun = dryrun

	return v, nil
}

// BuildGetPayload builds the payload for the devbuild get endpoint from CLI
// flags.
func BuildGetPayload(devbuildGetID string, devbuildGetSync string) (*devbuild.GetPayload, error) {
	var err error
	var id int
	{
		var v int64
		v, err = strconv.ParseInt(devbuildGetID, 10, strconv.IntSize)
		id = int(v)
		if err != nil {
			return nil, fmt.Errorf("invalid value for id, must be INT")
		}
	}
	var sync bool
	{
		if devbuildGetSync != "" {
			sync, err = strconv.ParseBool(devbuildGetSync)
			if err != nil {
				return nil, fmt.Errorf("invalid value for sync, must be BOOL")
			}
		}
	}
	v := &devbuild.GetPayload{}
	v.ID = id
	v.Sync = sync

	return v, nil
}

// BuildUpdatePayload builds the payload for the devbuild update endpoint from
// CLI flags.
func BuildUpdatePayload(devbuildUpdateBody string, devbuildUpdateID string, devbuildUpdateDryrun string) (*devbuild.UpdatePayload, error) {
	var err error
	var body UpdateRequestBody
	{
		err = json.Unmarshal([]byte(devbuildUpdateBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"status\": {\n         \"build_report\": {\n            \"binaries\": [\n               {\n                  \"component\": \"Qui vitae nostrum aut blanditiis possimus voluptate.\",\n                  \"oci_file\": {\n                     \"file\": \"Ut quia quod nisi est.\",\n                     \"repo\": \"Praesentium est necessitatibus hic.\",\n                     \"tag\": \"Nam doloremque.\"\n                  },\n                  \"platform\": \"Et labore.\",\n                  \"sha256_oci_file\": {\n                     \"file\": \"Ut quia quod nisi est.\",\n                     \"repo\": \"Praesentium est necessitatibus hic.\",\n                     \"tag\": \"Nam doloremque.\"\n                  },\n                  \"sha256_url\": \"http://batzmarks.net/delfina.walter\",\n                  \"url\": \"http://okon.net/casimir\"\n               },\n               {\n                  \"component\": \"Qui vitae nostrum aut blanditiis possimus voluptate.\",\n                  \"oci_file\": {\n                     \"file\": \"Ut quia quod nisi est.\",\n                     \"repo\": \"Praesentium est necessitatibus hic.\",\n                     \"tag\": \"Nam doloremque.\"\n                  },\n                  \"platform\": \"Et labore.\",\n                  \"sha256_oci_file\": {\n                     \"file\": \"Ut quia quod nisi est.\",\n                     \"repo\": \"Praesentium est necessitatibus hic.\",\n                     \"tag\": \"Nam doloremque.\"\n                  },\n                  \"sha256_url\": \"http://batzmarks.net/delfina.walter\",\n                  \"url\": \"http://okon.net/casimir\"\n               },\n               {\n                  \"component\": \"Qui vitae nostrum aut blanditiis possimus voluptate.\",\n                  \"oci_file\": {\n                     \"file\": \"Ut quia quod nisi est.\",\n                     \"repo\": \"Praesentium est necessitatibus hic.\",\n                     \"tag\": \"Nam doloremque.\"\n                  },\n                  \"platform\": \"Et labore.\",\n                  \"sha256_oci_file\": {\n                     \"file\": \"Ut quia quod nisi est.\",\n                     \"repo\": \"Praesentium est necessitatibus hic.\",\n                     \"tag\": \"Nam doloremque.\"\n                  },\n                  \"sha256_url\": \"http://batzmarks.net/delfina.walter\",\n                  \"url\": \"http://okon.net/casimir\"\n               },\n               {\n                  \"component\": \"Qui vitae nostrum aut blanditiis possimus voluptate.\",\n                  \"oci_file\": {\n                     \"file\": \"Ut quia quod nisi est.\",\n                     \"repo\": \"Praesentium est necessitatibus hic.\",\n                     \"tag\": \"Nam doloremque.\"\n                  },\n                  \"platform\": \"Et labore.\",\n                  \"sha256_oci_file\": {\n                     \"file\": \"Ut quia quod nisi est.\",\n                     \"repo\": \"Praesentium est necessitatibus hic.\",\n                     \"tag\": \"Nam doloremque.\"\n                  },\n                  \"sha256_url\": \"http://batzmarks.net/delfina.walter\",\n                  \"url\": \"http://okon.net/casimir\"\n               }\n            ],\n            \"git_sha\": \"jh6\",\n            \"images\": [\n               {\n                  \"internal_url\": \"http://hauck.name/baron\",\n                  \"platform\": \"Tenetur labore placeat id explicabo iste rem.\",\n                  \"url\": \"http://streich.biz/sophie\"\n               },\n               {\n                  \"internal_url\": \"http://hauck.name/baron\",\n                  \"platform\": \"Tenetur labore placeat id explicabo iste rem.\",\n                  \"url\": \"http://streich.biz/sophie\"\n               }\n            ],\n            \"plugin_git_sha\": \"1l6\",\n            \"printed_version\": \"Rem atque veritatis.\"\n         },\n         \"err_msg\": \"Ab tempora autem.\",\n         \"pipeline_build_id\": 8771877194158390155,\n         \"pipeline_end_at\": \"0369-44-93 09:74:67\",\n         \"pipeline_start_at\": \"9953-90-66 13:84:41\",\n         \"pipeline_view_url\": \"http://wisoky.net/madaline_hegmann\",\n         \"pipeline_view_urls\": [\n            \"http://kunde.org/cristina\",\n            \"http://daniel.org/jeramie.schimmel\"\n         ],\n         \"status\": \"failure\",\n         \"tekton_status\": {\n            \"pipelines\": [\n               {\n                  \"end_at\": \"1987-12-16T02:33:04Z\",\n                  \"git_sha\": \"x4x\",\n                  \"images\": [\n                     {\n                        \"internal_url\": \"http://hauck.name/baron\",\n                        \"platform\": \"Tenetur labore placeat id explicabo iste rem.\",\n                        \"url\": \"http://streich.biz/sophie\"\n                     },\n                     {\n                        \"internal_url\": \"http://hauck.name/baron\",\n                        \"platform\": \"Tenetur labore placeat id explicabo iste rem.\",\n                        \"url\": \"http://streich.biz/sophie\"\n                     },\n                     {\n                        \"internal_url\": \"http://hauck.name/baron\",\n                        \"platform\": \"Tenetur labore placeat id explicabo iste rem.\",\n                        \"url\": \"http://streich.biz/sophie\"\n                     },\n                     {\n                        \"internal_url\": \"http://hauck.name/baron\",\n                        \"platform\": \"Tenetur labore placeat id explicabo iste rem.\",\n                        \"url\": \"http://streich.biz/sophie\"\n                     }\n                  ],\n                  \"name\": \"Animi quia tempora.\",\n                  \"oci_artifacts\": [\n                     {\n                        \"files\": [\n                           \"Beatae non fugit molestiae.\",\n                           \"Temporibus optio id iure.\"\n                        ],\n                        \"repo\": \"Praesentium hic.\",\n                        \"tag\": \"Adipisci rerum neque temporibus quia exercitationem qui.\"\n                     },\n                     {\n                        \"files\": [\n                           \"Beatae non fugit molestiae.\",\n                           \"Temporibus optio id iure.\"\n                        ],\n                        \"repo\": \"Praesentium hic.\",\n                        \"tag\": \"Adipisci rerum neque temporibus quia exercitationem qui.\"\n                     },\n                     {\n                        \"files\": [\n                           \"Beatae non fugit molestiae.\",\n                           \"Temporibus optio id iure.\"\n                        ],\n                        \"repo\": \"Praesentium hic.\",\n                        \"tag\": \"Adipisci rerum neque temporibus quia exercitationem qui.\"\n                     },\n                     {\n                        \"files\": [\n                           \"Beatae non fugit molestiae.\",\n                           \"Temporibus optio id iure.\"\n                        ],\n                        \"repo\": \"Praesentium hic.\",\n                        \"tag\": \"Adipisci rerum neque temporibus quia exercitationem qui.\"\n                     }\n                  ],\n                  \"platform\": \"In laborum earum doloribus dignissimos sed doloremque.\",\n                  \"start_at\": \"1981-03-16T04:12:58Z\",\n                  \"status\": \"failure\",\n                  \"url\": \"http://pollichtreutel.org/paolo_schowalter\"\n               },\n               {\n                  \"end_at\": \"1987-12-16T02:33:04Z\",\n                  \"git_sha\": \"x4x\",\n                  \"images\": [\n                     {\n                        \"internal_url\": \"http://hauck.name/baron\",\n                        \"platform\": \"Tenetur labore placeat id explicabo iste rem.\",\n                        \"url\": \"http://streich.biz/sophie\"\n                     },\n                     {\n                        \"internal_url\": \"http://hauck.name/baron\",\n                        \"platform\": \"Tenetur labore placeat id explicabo iste rem.\",\n                        \"url\": \"http://streich.biz/sophie\"\n                     },\n                     {\n                        \"internal_url\": \"http://hauck.name/baron\",\n                        \"platform\": \"Tenetur labore placeat id explicabo iste rem.\",\n                        \"url\": \"http://streich.biz/sophie\"\n                     },\n                     {\n                        \"internal_url\": \"http://hauck.name/baron\",\n                        \"platform\": \"Tenetur labore placeat id explicabo iste rem.\",\n                        \"url\": \"http://streich.biz/sophie\"\n                     }\n                  ],\n                  \"name\": \"Animi quia tempora.\",\n                  \"oci_artifacts\": [\n                     {\n                        \"files\": [\n                           \"Beatae non fugit molestiae.\",\n                           \"Temporibus optio id iure.\"\n                        ],\n                        \"repo\": \"Praesentium hic.\",\n                        \"tag\": \"Adipisci rerum neque temporibus quia exercitationem qui.\"\n                     },\n                     {\n                        \"files\": [\n                           \"Beatae non fugit molestiae.\",\n                           \"Temporibus optio id iure.\"\n                        ],\n                        \"repo\": \"Praesentium hic.\",\n                        \"tag\": \"Adipisci rerum neque temporibus quia exercitationem qui.\"\n                     },\n                     {\n                        \"files\": [\n                           \"Beatae non fugit molestiae.\",\n                           \"Temporibus optio id iure.\"\n                        ],\n                        \"repo\": \"Praesentium hic.\",\n                        \"tag\": \"Adipisci rerum neque temporibus quia exercitationem qui.\"\n                     },\n                     {\n                        \"files\": [\n                           \"Beatae non fugit molestiae.\",\n                           \"Temporibus optio id iure.\"\n                        ],\n                        \"repo\": \"Praesentium hic.\",\n                        \"tag\": \"Adipisci rerum neque temporibus quia exercitationem qui.\"\n                     }\n                  ],\n                  \"platform\": \"In laborum earum doloribus dignissimos sed doloremque.\",\n                  \"start_at\": \"1981-03-16T04:12:58Z\",\n                  \"status\": \"failure\",\n                  \"url\": \"http://pollichtreutel.org/paolo_schowalter\"\n               }\n            ],\n            \"triggers_event_ids\": [\n               \"e9166f26-9ee4-44e1-9fa5-18192ccf4dc9\",\n               \"eaefb056-e6de-4158-b30d-7cffdfa16d73\",\n               \"a808b70b-9a09-4785-ac0f-4d3278bc37cf\",\n               \"426843cc-e5ad-409e-a876-bb39a7c56ea7\"\n            ]\n         }\n      }\n   }'")
		}
		if body.Status == nil {
			err = goa.MergeErrors(err, goa.MissingFieldError("status", "body"))
		}
		if body.Status != nil {
			if err2 := ValidateDevBuildStatusRequestBody(body.Status); err2 != nil {
				err = goa.MergeErrors(err, err2)
			}
		}
		if err != nil {
			return nil, err
		}
	}
	var id int
	{
		var v int64
		v, err = strconv.ParseInt(devbuildUpdateID, 10, strconv.IntSize)
		id = int(v)
		if err != nil {
			return nil, fmt.Errorf("invalid value for id, must be INT")
		}
	}
	var dryrun bool
	{
		if devbuildUpdateDryrun != "" {
			dryrun, err = strconv.ParseBool(devbuildUpdateDryrun)
			if err != nil {
				return nil, fmt.Errorf("invalid value for dryrun, must be BOOL")
			}
		}
	}
	v := &devbuild.UpdatePayload{}
	if body.Status != nil {
		v.Status = marshalDevBuildStatusRequestBodyToDevbuildDevBuildStatus(body.Status)
	}
	v.ID = id
	v.Dryrun = dryrun

	return v, nil
}

// BuildRerunPayload builds the payload for the devbuild rerun endpoint from
// CLI flags.
func BuildRerunPayload(devbuildRerunID string, devbuildRerunDryrun string) (*devbuild.RerunPayload, error) {
	var err error
	var id int
	{
		var v int64
		v, err = strconv.ParseInt(devbuildRerunID, 10, strconv.IntSize)
		id = int(v)
		if err != nil {
			return nil, fmt.Errorf("invalid value for id, must be INT")
		}
	}
	var dryrun bool
	{
		if devbuildRerunDryrun != "" {
			dryrun, err = strconv.ParseBool(devbuildRerunDryrun)
			if err != nil {
				return nil, fmt.Errorf("invalid value for dryrun, must be BOOL")
			}
		}
	}
	v := &devbuild.RerunPayload{}
	v.ID = id
	v.Dryrun = dryrun

	return v, nil
}

// BuildIngestEventPayload builds the payload for the devbuild ingestEvent
// endpoint from CLI flags.
func BuildIngestEventPayload(devbuildIngestEventBody string, devbuildIngestEventDatacontenttype string, devbuildIngestEventID string, devbuildIngestEventSource string, devbuildIngestEventType string, devbuildIngestEventSpecversion string, devbuildIngestEventTime string) (*devbuild.CloudEventIngestEventPayload, error) {
	var err error
	var body IngestEventRequestBody
	{
		err = json.Unmarshal([]byte(devbuildIngestEventBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"data\": {\n         \"buildId\": \"123\",\n         \"duration\": 3600,\n         \"status\": \"success\",\n         \"version\": \"v6.1.0\"\n      },\n      \"dataschema\": \"https://example.com/registry/schemas/build-event.json\",\n      \"subject\": \"tidb-build-123\"\n   }'")
		}
		if body.Data == nil {
			err = goa.MergeErrors(err, goa.MissingFieldError("data", "body"))
		}
		if err != nil {
			return nil, err
		}
	}
	var datacontenttype *string
	{
		if devbuildIngestEventDatacontenttype != "" {
			datacontenttype = &devbuildIngestEventDatacontenttype
		}
	}
	var id string
	{
		id = devbuildIngestEventID
	}
	var source string
	{
		source = devbuildIngestEventSource
	}
	var type_ string
	{
		type_ = devbuildIngestEventType
	}
	var specversion string
	{
		specversion = devbuildIngestEventSpecversion
	}
	var time_ string
	{
		time_ = devbuildIngestEventTime
		err = goa.MergeErrors(err, goa.ValidateFormat("time", time_, goa.FormatDateTime))
		if err != nil {
			return nil, err
		}
	}
	v := &devbuild.CloudEventIngestEventPayload{
		Dataschema: body.Dataschema,
		Subject:    body.Subject,
		Data:       body.Data,
	}
	v.Datacontenttype = datacontenttype
	v.ID = id
	v.Source = source
	v.Type = type_
	v.Specversion = specversion
	v.Time = time_

	return v, nil
}
