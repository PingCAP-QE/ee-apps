// Code generated by goa v3.20.0, DO NOT EDIT.
//
// devbuild HTTP client CLI support package
//
// Command:
// $ goa gen github.com/PingCAP-QE/ee-apps/tibuild/internal/service/design -o
// ./service

package client

import (
	"encoding/json"
	"fmt"
	"strconv"

	devbuild "github.com/PingCAP-QE/ee-apps/tibuild/internal/service/gen/devbuild"
	goa "goa.design/goa/v3/pkg"
)

// BuildListPayload builds the payload for the devbuild list endpoint from CLI
// flags.
func BuildListPayload(devbuildListBody string, devbuildListPage string, devbuildListPageSize string, devbuildListHotfix string, devbuildListSort string, devbuildListCreatedBy string) (*devbuild.ListPayload, error) {
	var err error
	var body ListRequestBody
	{
		err = json.Unmarshal([]byte(devbuildListBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"direction\": \"asc\"\n   }'")
		}
	}
	var page int
	{
		if devbuildListPage != "" {
			var v int64
			v, err = strconv.ParseInt(devbuildListPage, 10, strconv.IntSize)
			page = int(v)
			if err != nil {
				return nil, fmt.Errorf("invalid value for page, must be INT")
			}
		}
	}
	var pageSize int
	{
		if devbuildListPageSize != "" {
			var v int64
			v, err = strconv.ParseInt(devbuildListPageSize, 10, strconv.IntSize)
			pageSize = int(v)
			if err != nil {
				return nil, fmt.Errorf("invalid value for pageSize, must be INT")
			}
		}
	}
	var hotfix bool
	{
		if devbuildListHotfix != "" {
			hotfix, err = strconv.ParseBool(devbuildListHotfix)
			if err != nil {
				return nil, fmt.Errorf("invalid value for hotfix, must be BOOL")
			}
		}
	}
	var sort string
	{
		if devbuildListSort != "" {
			sort = devbuildListSort
			if !(sort == "created_at" || sort == "updated_at") {
				err = goa.MergeErrors(err, goa.InvalidEnumValueError("sort", sort, []any{"created_at", "updated_at"}))
			}
			if err != nil {
				return nil, err
			}
		}
	}
	var createdBy *string
	{
		if devbuildListCreatedBy != "" {
			createdBy = &devbuildListCreatedBy
		}
	}
	v := &devbuild.ListPayload{
		Direction: body.Direction,
	}
	{
		var zero string
		if v.Direction == zero {
			v.Direction = "desc"
		}
	}
	v.Page = page
	v.PageSize = pageSize
	v.Hotfix = hotfix
	v.Sort = sort
	v.CreatedBy = createdBy

	return v, nil
}

// BuildCreatePayload builds the payload for the devbuild create endpoint from
// CLI flags.
func BuildCreatePayload(devbuildCreateBody string, devbuildCreateDryrun string) (*devbuild.CreatePayload, error) {
	var err error
	var body CreateRequestBody
	{
		err = json.Unmarshal([]byte(devbuildCreateBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"created_by\": \"david_stehr@koch.name\",\n      \"request\": {\n         \"build_env\": \"Voluptate doloribus architecto numquam est.\",\n         \"builder_img\": \"Neque doloremque.\",\n         \"edition\": \"enterprise\",\n         \"features\": \"Commodi dolorum.\",\n         \"gitRef\": \"Et facere magnam velit optio est.\",\n         \"githubRepo\": \"Doloribus nisi corporis nihil soluta.\",\n         \"is_hotfix\": true,\n         \"is_push_gcr\": false,\n         \"pipeline_engine\": \"tekton\",\n         \"plugin_git_ref\": \"Qui necessitatibus possimus ab quos facere.\",\n         \"product\": \"tidb\",\n         \"productBaseImg\": \"Voluptatem rem earum aut.\",\n         \"productDockerfile\": \"Nulla aut natus totam esse maxime aliquid.\",\n         \"targetImg\": \"Numquam at illo voluptas dolor atque.\",\n         \"version\": \"Beatae sunt nesciunt amet autem.\"\n      }\n   }'")
		}
		if body.Request == nil {
			err = goa.MergeErrors(err, goa.MissingFieldError("request", "body"))
		}
		err = goa.MergeErrors(err, goa.ValidateFormat("body.created_by", body.CreatedBy, goa.FormatEmail))
		if body.Request != nil {
			if err2 := ValidateDevBuildRequestRequestBody(body.Request); err2 != nil {
				err = goa.MergeErrors(err, err2)
			}
		}
		if err != nil {
			return nil, err
		}
	}
	var dryrun bool
	{
		if devbuildCreateDryrun != "" {
			dryrun, err = strconv.ParseBool(devbuildCreateDryrun)
			if err != nil {
				return nil, fmt.Errorf("invalid value for dryrun, must be BOOL")
			}
		}
	}
	v := &devbuild.CreatePayload{
		CreatedBy: body.CreatedBy,
	}
	if body.Request != nil {
		v.Request = marshalDevBuildRequestRequestBodyToDevbuildDevBuildRequest(body.Request)
	}
	v.Dryrun = dryrun

	return v, nil
}

// BuildGetPayload builds the payload for the devbuild get endpoint from CLI
// flags.
func BuildGetPayload(devbuildGetID string, devbuildGetSync string) (*devbuild.GetPayload, error) {
	var err error
	var id int
	{
		var v int64
		v, err = strconv.ParseInt(devbuildGetID, 10, strconv.IntSize)
		id = int(v)
		if err != nil {
			return nil, fmt.Errorf("invalid value for id, must be INT")
		}
	}
	var sync bool
	{
		if devbuildGetSync != "" {
			sync, err = strconv.ParseBool(devbuildGetSync)
			if err != nil {
				return nil, fmt.Errorf("invalid value for sync, must be BOOL")
			}
		}
	}
	v := &devbuild.GetPayload{}
	v.ID = id
	v.Sync = sync

	return v, nil
}

// BuildUpdatePayload builds the payload for the devbuild update endpoint from
// CLI flags.
func BuildUpdatePayload(devbuildUpdateBody string, devbuildUpdateID string, devbuildUpdateDryrun string) (*devbuild.UpdatePayload, error) {
	var err error
	var body UpdateRequestBody
	{
		err = json.Unmarshal([]byte(devbuildUpdateBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"DevBuild\": {\n         \"id\": 8425332152695240675,\n         \"meta\": {\n            \"created_at\": \"1982-06-14T15:45:52Z\",\n            \"created_by\": \"khalil_steuber@rippin.org\",\n            \"updated_at\": \"1994-05-27T04:49:34Z\"\n         },\n         \"spec\": {\n            \"build_env\": \"Eum sit.\",\n            \"builder_img\": \"Suscipit et.\",\n            \"edition\": \"enterprise\",\n            \"features\": \"Magni suscipit eum vel officiis quasi sit.\",\n            \"gitHash\": \"Ex amet est nemo harum voluptas.\",\n            \"gitRef\": \"Eaque exercitationem et.\",\n            \"githubRepo\": \"Blanditiis velit voluptatem exercitationem.\",\n            \"is_hotfix\": true,\n            \"is_push_gcr\": true,\n            \"pipeline_engine\": \"tekton\",\n            \"plugin_git_ref\": \"Error officiis impedit quaerat consectetur voluptas ea.\",\n            \"product\": \"br\",\n            \"productBaseImg\": \"Numquam explicabo quod quidem perspiciatis.\",\n            \"productDockerfile\": \"Dolor laudantium dolores saepe nihil voluptas id.\",\n            \"targetImg\": \"Quasi quasi error laboriosam qui.\",\n            \"version\": \"Dolorum est nisi voluptatem et harum quae.\"\n         },\n         \"status\": {\n            \"buildReport\": {\n               \"binaries\": [\n                  {\n                     \"component\": \"Qui tempora quos quae velit sint quia.\",\n                     \"ociFile\": {\n                        \"file\": \"Commodi eius et ad ut.\",\n                        \"repo\": \"Dolor deserunt atque exercitationem non placeat.\",\n                        \"tag\": \"Possimus libero.\"\n                     },\n                     \"platform\": \"Ab quos esse delectus ea rem.\",\n                     \"sha256OciFile\": {\n                        \"file\": \"Commodi eius et ad ut.\",\n                        \"repo\": \"Dolor deserunt atque exercitationem non placeat.\",\n                        \"tag\": \"Possimus libero.\"\n                     },\n                     \"sha256URL\": \"Voluptatem ratione hic quae tempora ratione.\",\n                     \"url\": \"Quos eaque rerum expedita perspiciatis.\"\n                  },\n                  {\n                     \"component\": \"Qui tempora quos quae velit sint quia.\",\n                     \"ociFile\": {\n                        \"file\": \"Commodi eius et ad ut.\",\n                        \"repo\": \"Dolor deserunt atque exercitationem non placeat.\",\n                        \"tag\": \"Possimus libero.\"\n                     },\n                     \"platform\": \"Ab quos esse delectus ea rem.\",\n                     \"sha256OciFile\": {\n                        \"file\": \"Commodi eius et ad ut.\",\n                        \"repo\": \"Dolor deserunt atque exercitationem non placeat.\",\n                        \"tag\": \"Possimus libero.\"\n                     },\n                     \"sha256URL\": \"Voluptatem ratione hic quae tempora ratione.\",\n                     \"url\": \"Quos eaque rerum expedita perspiciatis.\"\n                  },\n                  {\n                     \"component\": \"Qui tempora quos quae velit sint quia.\",\n                     \"ociFile\": {\n                        \"file\": \"Commodi eius et ad ut.\",\n                        \"repo\": \"Dolor deserunt atque exercitationem non placeat.\",\n                        \"tag\": \"Possimus libero.\"\n                     },\n                     \"platform\": \"Ab quos esse delectus ea rem.\",\n                     \"sha256OciFile\": {\n                        \"file\": \"Commodi eius et ad ut.\",\n                        \"repo\": \"Dolor deserunt atque exercitationem non placeat.\",\n                        \"tag\": \"Possimus libero.\"\n                     },\n                     \"sha256URL\": \"Voluptatem ratione hic quae tempora ratione.\",\n                     \"url\": \"Quos eaque rerum expedita perspiciatis.\"\n                  }\n               ],\n               \"gitHash\": \"Dolore ipsam non.\",\n               \"images\": [\n                  {\n                     \"platform\": \"Suscipit exercitationem assumenda.\",\n                     \"url\": \"In voluptas omnis.\"\n                  },\n                  {\n                     \"platform\": \"Suscipit exercitationem assumenda.\",\n                     \"url\": \"In voluptas omnis.\"\n                  }\n               ],\n               \"pluginGitHash\": \"Non eligendi eum.\",\n               \"printedVersion\": \"Asperiores sit consequatur repudiandae voluptas sit.\"\n            },\n            \"errMsg\": \"Illum perferendis.\",\n            \"pipelineBuildID\": 7878572798948134575,\n            \"pipelineEndAt\": \"Distinctio minima molestiae quis.\",\n            \"pipelineStartAt\": \"Tempora earum quam est architecto.\",\n            \"pipelineViewURL\": \"Quia delectus qui minima.\",\n            \"pipelineViewURLs\": [\n               \"Aut modi voluptas aut eveniet.\",\n               \"Esse aut.\",\n               \"Delectus dolore libero aut.\",\n               \"Corrupti autem iste.\"\n            ],\n            \"status\": \"FAILURE\",\n            \"tektonStatus\": {\n               \"pipelines\": [\n                  {\n                     \"endAt\": \"Animi at sequi error.\",\n                     \"gitHash\": \"Aut molestiae.\",\n                     \"images\": [\n                        {\n                           \"platform\": \"Suscipit exercitationem assumenda.\",\n                           \"url\": \"In voluptas omnis.\"\n                        },\n                        {\n                           \"platform\": \"Suscipit exercitationem assumenda.\",\n                           \"url\": \"In voluptas omnis.\"\n                        },\n                        {\n                           \"platform\": \"Suscipit exercitationem assumenda.\",\n                           \"url\": \"In voluptas omnis.\"\n                        }\n                     ],\n                     \"name\": \"Occaecati omnis sunt a perspiciatis ratione.\",\n                     \"ociArtifacts\": [\n                        {\n                           \"files\": [\n                              \"Eius quae quisquam itaque.\",\n                              \"Debitis dolore explicabo repellendus et error provident.\"\n                           ],\n                           \"repo\": \"Quo dolor consequatur est incidunt labore non.\",\n                           \"tag\": \"Minus quis qui magnam.\"\n                        },\n                        {\n                           \"files\": [\n                              \"Eius quae quisquam itaque.\",\n                              \"Debitis dolore explicabo repellendus et error provident.\"\n                           ],\n                           \"repo\": \"Quo dolor consequatur est incidunt labore non.\",\n                           \"tag\": \"Minus quis qui magnam.\"\n                        },\n                        {\n                           \"files\": [\n                              \"Eius quae quisquam itaque.\",\n                              \"Debitis dolore explicabo repellendus et error provident.\"\n                           ],\n                           \"repo\": \"Quo dolor consequatur est incidunt labore non.\",\n                           \"tag\": \"Minus quis qui magnam.\"\n                        },\n                        {\n                           \"files\": [\n                              \"Eius quae quisquam itaque.\",\n                              \"Debitis dolore explicabo repellendus et error provident.\"\n                           ],\n                           \"repo\": \"Quo dolor consequatur est incidunt labore non.\",\n                           \"tag\": \"Minus quis qui magnam.\"\n                        }\n                     ],\n                     \"platform\": \"Explicabo id eum quae illum vitae necessitatibus.\",\n                     \"startAt\": \"Accusantium nostrum quaerat necessitatibus distinctio nobis.\",\n                     \"status\": \"PROCESSING\",\n                     \"url\": \"Vero sunt culpa molestiae sint ut.\"\n                  },\n                  {\n                     \"endAt\": \"Animi at sequi error.\",\n                     \"gitHash\": \"Aut molestiae.\",\n                     \"images\": [\n                        {\n                           \"platform\": \"Suscipit exercitationem assumenda.\",\n                           \"url\": \"In voluptas omnis.\"\n                        },\n                        {\n                           \"platform\": \"Suscipit exercitationem assumenda.\",\n                           \"url\": \"In voluptas omnis.\"\n                        },\n                        {\n                           \"platform\": \"Suscipit exercitationem assumenda.\",\n                           \"url\": \"In voluptas omnis.\"\n                        }\n                     ],\n                     \"name\": \"Occaecati omnis sunt a perspiciatis ratione.\",\n                     \"ociArtifacts\": [\n                        {\n                           \"files\": [\n                              \"Eius quae quisquam itaque.\",\n                              \"Debitis dolore explicabo repellendus et error provident.\"\n                           ],\n                           \"repo\": \"Quo dolor consequatur est incidunt labore non.\",\n                           \"tag\": \"Minus quis qui magnam.\"\n                        },\n                        {\n                           \"files\": [\n                              \"Eius quae quisquam itaque.\",\n                              \"Debitis dolore explicabo repellendus et error provident.\"\n                           ],\n                           \"repo\": \"Quo dolor consequatur est incidunt labore non.\",\n                           \"tag\": \"Minus quis qui magnam.\"\n                        },\n                        {\n                           \"files\": [\n                              \"Eius quae quisquam itaque.\",\n                              \"Debitis dolore explicabo repellendus et error provident.\"\n                           ],\n                           \"repo\": \"Quo dolor consequatur est incidunt labore non.\",\n                           \"tag\": \"Minus quis qui magnam.\"\n                        },\n                        {\n                           \"files\": [\n                              \"Eius quae quisquam itaque.\",\n                              \"Debitis dolore explicabo repellendus et error provident.\"\n                           ],\n                           \"repo\": \"Quo dolor consequatur est incidunt labore non.\",\n                           \"tag\": \"Minus quis qui magnam.\"\n                        }\n                     ],\n                     \"platform\": \"Explicabo id eum quae illum vitae necessitatibus.\",\n                     \"startAt\": \"Accusantium nostrum quaerat necessitatibus distinctio nobis.\",\n                     \"status\": \"PROCESSING\",\n                     \"url\": \"Vero sunt culpa molestiae sint ut.\"\n                  },\n                  {\n                     \"endAt\": \"Animi at sequi error.\",\n                     \"gitHash\": \"Aut molestiae.\",\n                     \"images\": [\n                        {\n                           \"platform\": \"Suscipit exercitationem assumenda.\",\n                           \"url\": \"In voluptas omnis.\"\n                        },\n                        {\n                           \"platform\": \"Suscipit exercitationem assumenda.\",\n                           \"url\": \"In voluptas omnis.\"\n                        },\n                        {\n                           \"platform\": \"Suscipit exercitationem assumenda.\",\n                           \"url\": \"In voluptas omnis.\"\n                        }\n                     ],\n                     \"name\": \"Occaecati omnis sunt a perspiciatis ratione.\",\n                     \"ociArtifacts\": [\n                        {\n                           \"files\": [\n                              \"Eius quae quisquam itaque.\",\n                              \"Debitis dolore explicabo repellendus et error provident.\"\n                           ],\n                           \"repo\": \"Quo dolor consequatur est incidunt labore non.\",\n                           \"tag\": \"Minus quis qui magnam.\"\n                        },\n                        {\n                           \"files\": [\n                              \"Eius quae quisquam itaque.\",\n                              \"Debitis dolore explicabo repellendus et error provident.\"\n                           ],\n                           \"repo\": \"Quo dolor consequatur est incidunt labore non.\",\n                           \"tag\": \"Minus quis qui magnam.\"\n                        },\n                        {\n                           \"files\": [\n                              \"Eius quae quisquam itaque.\",\n                              \"Debitis dolore explicabo repellendus et error provident.\"\n                           ],\n                           \"repo\": \"Quo dolor consequatur est incidunt labore non.\",\n                           \"tag\": \"Minus quis qui magnam.\"\n                        },\n                        {\n                           \"files\": [\n                              \"Eius quae quisquam itaque.\",\n                              \"Debitis dolore explicabo repellendus et error provident.\"\n                           ],\n                           \"repo\": \"Quo dolor consequatur est incidunt labore non.\",\n                           \"tag\": \"Minus quis qui magnam.\"\n                        }\n                     ],\n                     \"platform\": \"Explicabo id eum quae illum vitae necessitatibus.\",\n                     \"startAt\": \"Accusantium nostrum quaerat necessitatibus distinctio nobis.\",\n                     \"status\": \"PROCESSING\",\n                     \"url\": \"Vero sunt culpa molestiae sint ut.\"\n                  },\n                  {\n                     \"endAt\": \"Animi at sequi error.\",\n                     \"gitHash\": \"Aut molestiae.\",\n                     \"images\": [\n                        {\n                           \"platform\": \"Suscipit exercitationem assumenda.\",\n                           \"url\": \"In voluptas omnis.\"\n                        },\n                        {\n                           \"platform\": \"Suscipit exercitationem assumenda.\",\n                           \"url\": \"In voluptas omnis.\"\n                        },\n                        {\n                           \"platform\": \"Suscipit exercitationem assumenda.\",\n                           \"url\": \"In voluptas omnis.\"\n                        }\n                     ],\n                     \"name\": \"Occaecati omnis sunt a perspiciatis ratione.\",\n                     \"ociArtifacts\": [\n                        {\n                           \"files\": [\n                              \"Eius quae quisquam itaque.\",\n                              \"Debitis dolore explicabo repellendus et error provident.\"\n                           ],\n                           \"repo\": \"Quo dolor consequatur est incidunt labore non.\",\n                           \"tag\": \"Minus quis qui magnam.\"\n                        },\n                        {\n                           \"files\": [\n                              \"Eius quae quisquam itaque.\",\n                              \"Debitis dolore explicabo repellendus et error provident.\"\n                           ],\n                           \"repo\": \"Quo dolor consequatur est incidunt labore non.\",\n                           \"tag\": \"Minus quis qui magnam.\"\n                        },\n                        {\n                           \"files\": [\n                              \"Eius quae quisquam itaque.\",\n                              \"Debitis dolore explicabo repellendus et error provident.\"\n                           ],\n                           \"repo\": \"Quo dolor consequatur est incidunt labore non.\",\n                           \"tag\": \"Minus quis qui magnam.\"\n                        },\n                        {\n                           \"files\": [\n                              \"Eius quae quisquam itaque.\",\n                              \"Debitis dolore explicabo repellendus et error provident.\"\n                           ],\n                           \"repo\": \"Quo dolor consequatur est incidunt labore non.\",\n                           \"tag\": \"Minus quis qui magnam.\"\n                        }\n                     ],\n                     \"platform\": \"Explicabo id eum quae illum vitae necessitatibus.\",\n                     \"startAt\": \"Accusantium nostrum quaerat necessitatibus distinctio nobis.\",\n                     \"status\": \"PROCESSING\",\n                     \"url\": \"Vero sunt culpa molestiae sint ut.\"\n                  }\n               ]\n            }\n         }\n      }\n   }'")
		}
		if body.DevBuild == nil {
			err = goa.MergeErrors(err, goa.MissingFieldError("DevBuild", "body"))
		}
		if body.DevBuild != nil {
			if err2 := ValidateDevBuildRequestBody(body.DevBuild); err2 != nil {
				err = goa.MergeErrors(err, err2)
			}
		}
		if err != nil {
			return nil, err
		}
	}
	var id int
	{
		var v int64
		v, err = strconv.ParseInt(devbuildUpdateID, 10, strconv.IntSize)
		id = int(v)
		if err != nil {
			return nil, fmt.Errorf("invalid value for id, must be INT")
		}
	}
	var dryrun bool
	{
		if devbuildUpdateDryrun != "" {
			dryrun, err = strconv.ParseBool(devbuildUpdateDryrun)
			if err != nil {
				return nil, fmt.Errorf("invalid value for dryrun, must be BOOL")
			}
		}
	}
	v := &devbuild.UpdatePayload{}
	if body.DevBuild != nil {
		v.DevBuild = marshalDevBuildRequestBodyToDevbuildDevBuild(body.DevBuild)
	}
	v.ID = id
	v.Dryrun = dryrun

	return v, nil
}

// BuildRerunPayload builds the payload for the devbuild rerun endpoint from
// CLI flags.
func BuildRerunPayload(devbuildRerunID string, devbuildRerunDryrun string) (*devbuild.RerunPayload, error) {
	var err error
	var id int
	{
		var v int64
		v, err = strconv.ParseInt(devbuildRerunID, 10, strconv.IntSize)
		id = int(v)
		if err != nil {
			return nil, fmt.Errorf("invalid value for id, must be INT")
		}
	}
	var dryrun bool
	{
		if devbuildRerunDryrun != "" {
			dryrun, err = strconv.ParseBool(devbuildRerunDryrun)
			if err != nil {
				return nil, fmt.Errorf("invalid value for dryrun, must be BOOL")
			}
		}
	}
	v := &devbuild.RerunPayload{}
	v.ID = id
	v.Dryrun = dryrun

	return v, nil
}
