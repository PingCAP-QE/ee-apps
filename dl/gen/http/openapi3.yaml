openapi: 3.0.3
info:
    title: Download OCI artifacts Service
    description: Service for downloading files from OCI artifact
    version: 0.0.1
servers:
    - url: http://localhost:8000
paths:
    /healthz:
        get:
            tags:
                - health
            summary: healthz health
            operationId: health#healthz
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                type: boolean
                                example: true
                            example: true
    /livez:
        get:
            tags:
                - health
            summary: livez health
            operationId: health#livez
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                type: boolean
                                example: true
                            example: true
    /oci-file-sha256/{repository}:
        get:
            tags:
                - oci
            summary: download-file-sha256 oci
            operationId: oci#download-file-sha256
            parameters:
                - name: file
                  in: query
                  description: file name in OCI artifact
                  allowEmptyValue: true
                  required: true
                  schema:
                    type: string
                    description: file name in OCI artifact
                    example: Eligendi aut vero et neque odit.
                  example: At aperiam laboriosam odio ut quam.
                - name: tag
                  in: query
                  description: OCI artifact tag
                  allowEmptyValue: true
                  required: true
                  schema:
                    type: string
                    description: OCI artifact tag
                    example: Assumenda aliquam est et aut.
                  example: Magnam a corporis.
                - name: repository
                  in: path
                  description: OCI artifact repository
                  required: true
                  schema:
                    type: string
                    description: OCI artifact repository
                    example: Sed nihil autem dolor blanditiis accusamus sit.
                  example: Neque sunt ut repellendus.
            responses:
                "200":
                    description: OK response.
                    headers:
                        Content-Disposition:
                            description: Content-Disposition header for downloading
                            schema:
                                type: string
                                description: Content-Disposition header for downloading
                                example: attachment; filename*=UTF-8''tidb-v7.5.0-darwin-arm64.tar.gz.sha256
                            example: attachment; filename*=UTF-8''tidb-v7.5.0-darwin-arm64.tar.gz.sha256
                        Content-Length:
                            description: Length is the downloaded content length in bytes.
                            schema:
                                type: integer
                                description: Length is the downloaded content length in bytes.
                                example: 4194304
                                format: int64
                            example: 4194304
                    content:
                        application/plain-text:
                            schema:
                                type: string
                                format: binary
    /oci-file/{repository}:
        get:
            tags:
                - oci
            summary: download-file oci
            operationId: oci#download-file
            parameters:
                - name: tag
                  in: query
                  description: OCI artifact tag
                  allowEmptyValue: true
                  required: true
                  schema:
                    type: string
                    description: OCI artifact tag
                    example: v8.1.0_darwin_arm64
                  example: v8.1.0_darwin_arm64
                - name: file
                  in: query
                  description: file name in OCI artifact
                  allowEmptyValue: true
                  schema:
                    type: string
                    description: file name in OCI artifact
                    example: tidb-v7.5.0-darwin-arm64.tar.gz
                  example: tidb-v7.5.0-darwin-arm64.tar.gz
                - name: file_regex
                  in: query
                  description: file name regex pattern in OCI artifact
                  allowEmptyValue: true
                  schema:
                    type: string
                    description: file name regex pattern in OCI artifact
                    example: tidb-.+[.]tar[.]gz
                    format: regexp
                  example: tidb-.+[.]tar[.]gz
                - name: repository
                  in: path
                  description: OCI artifact repository
                  required: true
                  schema:
                    type: string
                    description: OCI artifact repository
                    example: hub.pingcap.net/pingcap/tidb/package
                  example: hub.pingcap.net/pingcap/tidb/package
            responses:
                "200":
                    description: OK response.
                    headers:
                        Content-Disposition:
                            description: Content-Disposition header for downloading
                            schema:
                                type: string
                                description: Content-Disposition header for downloading
                                example: attachment; filename*=UTF-8''tidb-v7.5.0-darwin-arm64.tar.gz
                            example: attachment; filename*=UTF-8''tidb-v7.5.0-darwin-arm64.tar.gz
                        Content-Length:
                            description: Length is the downloaded content length in bytes.
                            schema:
                                type: integer
                                description: Length is the downloaded content length in bytes.
                                example: 4194304
                                format: int64
                            example: 4194304
                    content:
                        application/octet-stream:
                            schema:
                                type: string
                                format: binary
    /oci-files/{repository}:
        get:
            tags:
                - oci
            summary: list-files oci
            operationId: oci#list-files
            parameters:
                - name: tag
                  in: query
                  description: OCI artifact tag
                  allowEmptyValue: true
                  required: true
                  schema:
                    type: string
                    description: OCI artifact tag
                    example: Dolor itaque ullam.
                  example: Repellendus id dolorem dolor quasi qui consectetur.
                - name: repository
                  in: path
                  description: OCI artifact repository
                  required: true
                  schema:
                    type: string
                    description: OCI artifact repository
                    example: Et et fugit.
                  example: Quia aperiam sunt quam et asperiores cupiditate.
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    type: string
                                    example: Qui itaque quos quaerat nulla.
                                example:
                                    - Vel nobis asperiores at.
                                    - Dignissimos error et repellendus.
                                    - Nam quibusdam recusandae dolor voluptas.
                            example:
                                - Et qui quo.
                                - Fugiat tempore sapiente dolorem et laborum impedit.
                                - Vero dolores amet possimus quasi libero nesciunt.
                                - Debitis nostrum maiores est.
    /s3-obj/{bucket}/{key}:
        get:
            tags:
                - ks3
            summary: download-object ks3
            operationId: ks3#download-object
            parameters:
                - name: bucket
                  in: path
                  description: bucket name
                  required: true
                  schema:
                    type: string
                    description: bucket name
                    example: Quaerat architecto.
                  example: Id et sit expedita.
                - name: key
                  in: path
                  description: object key
                  required: true
                  schema:
                    type: string
                    description: object key
                    example: Vero voluptatum perspiciatis omnis qui vel.
                  example: A at dolor soluta molestiae.
            responses:
                "200":
                    description: OK response.
                    headers:
                        Content-Disposition:
                            description: Content-Disposition header for downloading
                            schema:
                                type: string
                                description: Content-Disposition header for downloading
                                example: attachment; filename*=UTF-8''tidb-v7.5.0-darwin-arm64.tar.gz
                            example: attachment; filename*=UTF-8''tidb-v7.5.0-darwin-arm64.tar.gz
                        Content-Length:
                            description: Length is the downloaded content length in bytes.
                            schema:
                                type: integer
                                description: Length is the downloaded content length in bytes.
                                example: 4194304
                                format: int64
                            example: 4194304
                    content:
                        application/octet-stream:
                            schema:
                                type: string
                                format: binary
components: {}
tags:
    - name: health
      description: Health service
    - name: oci
      description: OCI artifacts download service
    - name: ks3
      description: OCI artifacts download service
