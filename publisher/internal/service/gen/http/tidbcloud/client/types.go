// Code generated by goa v3.23.1, DO NOT EDIT.
//
// tidbcloud HTTP client types
//
// Command:
// $ goa gen github.com/PingCAP-QE/ee-apps/publisher/internal/service/design -o
// ./service

package client

import (
	tidbcloud "github.com/PingCAP-QE/ee-apps/publisher/internal/service/gen/tidbcloud"
	goa "goa.design/goa/v3/pkg"
)

// UpdateComponentVersionInCloudconfigRequestBody is the type of the
// "tidbcloud" service "update-component-version-in-cloudconfig" endpoint HTTP
// request body.
type UpdateComponentVersionInCloudconfigRequestBody struct {
	// env stage
	Stage string `form:"stage" json:"stage" xml:"stage"`
	// container image with tag
	Image string `form:"image" json:"image" xml:"image"`
}

// AddTidbxImageTagInTcmsRequestBody is the type of the "tidbcloud" service
// "add-tidbx-image-tag-in-tcms" endpoint HTTP request body.
type AddTidbxImageTagInTcmsRequestBody struct {
	// container image with tag
	Image string `form:"image" json:"image" xml:"image"`
	// git informations
	Github *struct {
		// full github repo name
		FullRepo string `form:"full_repo" json:"full_repo" xml:"full_repo"`
		// git ref
		Ref *string `form:"ref" json:"ref" xml:"ref"`
		// full commit SHA
		CommitSha string `form:"commit_sha" json:"commit_sha" xml:"commit_sha"`
	} `form:"github,omitempty" json:"github,omitempty" xml:"github,omitempty"`
}

// UpdateComponentVersionInCloudconfigResponseBody is the type of the
// "tidbcloud" service "update-component-version-in-cloudconfig" endpoint HTTP
// response body.
type UpdateComponentVersionInCloudconfigResponseBody struct {
	Stage   *string                           `form:"stage,omitempty" json:"stage,omitempty" xml:"stage,omitempty"`
	Tickets []*TidbcloudOpsTicketResponseBody `form:"tickets,omitempty" json:"tickets,omitempty" xml:"tickets,omitempty"`
}

// AddTidbxImageTagInTcmsResponseBody is the type of the "tidbcloud" service
// "add-tidbx-image-tag-in-tcms" endpoint HTTP response body.
type AddTidbxImageTagInTcmsResponseBody struct {
	// github full repo
	Repo *string `json:"repo,omitempty"`
	// github branch or tag name
	Branch *string `json:"branch,omitempty"`
	// github commit sha in the repo
	Sha *string `json:"sha,omitempty"`
	// image tag
	ImageTag *string `json:"imageTag,omitempty"`
}

// TidbcloudOpsTicketResponseBody is used to define fields on response body
// types.
type TidbcloudOpsTicketResponseBody struct {
	// ticket ID
	ID *string `form:"id,omitempty" json:"id,omitempty" xml:"id,omitempty"`
	// ticket visit url
	URL *string `form:"url,omitempty" json:"url,omitempty" xml:"url,omitempty"`
	// release window ID
	ReleaseID *string `form:"release_id,omitempty" json:"release_id,omitempty" xml:"release_id,omitempty"`
	// component publish flow ID
	ChangeID *string `form:"change_id,omitempty" json:"change_id,omitempty" xml:"change_id,omitempty"`
	// component name
	Component *string `form:"component,omitempty" json:"component,omitempty" xml:"component,omitempty"`
	// component version derived from image tag
	ComponentVersion *string `form:"component_version,omitempty" json:"component_version,omitempty" xml:"component_version,omitempty"`
}

// NewUpdateComponentVersionInCloudconfigRequestBody builds the HTTP request
// body from the payload of the "update-component-version-in-cloudconfig"
// endpoint of the "tidbcloud" service.
func NewUpdateComponentVersionInCloudconfigRequestBody(p *tidbcloud.UpdateComponentVersionInCloudconfigPayload) *UpdateComponentVersionInCloudconfigRequestBody {
	body := &UpdateComponentVersionInCloudconfigRequestBody{
		Stage: p.Stage,
		Image: p.Image,
	}
	return body
}

// NewAddTidbxImageTagInTcmsRequestBody builds the HTTP request body from the
// payload of the "add-tidbx-image-tag-in-tcms" endpoint of the "tidbcloud"
// service.
func NewAddTidbxImageTagInTcmsRequestBody(p *tidbcloud.AddTidbxImageTagInTcmsPayload) *AddTidbxImageTagInTcmsRequestBody {
	body := &AddTidbxImageTagInTcmsRequestBody{
		Image: p.Image,
	}
	if p.Github != nil {
		body.Github = &struct {
			// full github repo name
			FullRepo string `form:"full_repo" json:"full_repo" xml:"full_repo"`
			// git ref
			Ref *string `form:"ref" json:"ref" xml:"ref"`
			// full commit SHA
			CommitSha string `form:"commit_sha" json:"commit_sha" xml:"commit_sha"`
		}{
			FullRepo:  p.Github.FullRepo,
			Ref:       p.Github.Ref,
			CommitSha: p.Github.CommitSha,
		}
	}
	return body
}

// NewUpdateComponentVersionInCloudconfigResultOK builds a "tidbcloud" service
// "update-component-version-in-cloudconfig" endpoint result from a HTTP "OK"
// response.
func NewUpdateComponentVersionInCloudconfigResultOK(body *UpdateComponentVersionInCloudconfigResponseBody) *tidbcloud.UpdateComponentVersionInCloudconfigResult {
	v := &tidbcloud.UpdateComponentVersionInCloudconfigResult{
		Stage: *body.Stage,
	}
	v.Tickets = make([]*tidbcloud.TidbcloudOpsTicket, len(body.Tickets))
	for i, val := range body.Tickets {
		if val == nil {
			v.Tickets[i] = nil
			continue
		}
		v.Tickets[i] = unmarshalTidbcloudOpsTicketResponseBodyToTidbcloudTidbcloudOpsTicket(val)
	}

	return v
}

// NewAddTidbxImageTagInTcmsResultOK builds a "tidbcloud" service
// "add-tidbx-image-tag-in-tcms" endpoint result from a HTTP "OK" response.
func NewAddTidbxImageTagInTcmsResultOK(body *AddTidbxImageTagInTcmsResponseBody) *tidbcloud.AddTidbxImageTagInTcmsResult {
	v := &tidbcloud.AddTidbxImageTagInTcmsResult{
		Repo:     body.Repo,
		Branch:   body.Branch,
		Sha:      body.Sha,
		ImageTag: body.ImageTag,
	}

	return v
}

// ValidateUpdateComponentVersionInCloudconfigResponseBody runs the validations
// defined on Update-Component-Version-In-CloudconfigResponseBody
func ValidateUpdateComponentVersionInCloudconfigResponseBody(body *UpdateComponentVersionInCloudconfigResponseBody) (err error) {
	if body.Stage == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("stage", "body"))
	}
	if body.Tickets == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("tickets", "body"))
	}
	for _, e := range body.Tickets {
		if e != nil {
			if err2 := ValidateTidbcloudOpsTicketResponseBody(e); err2 != nil {
				err = goa.MergeErrors(err, err2)
			}
		}
	}
	return
}

// ValidateTidbcloudOpsTicketResponseBody runs the validations defined on
// TidbcloudOpsTicketResponseBody
func ValidateTidbcloudOpsTicketResponseBody(body *TidbcloudOpsTicketResponseBody) (err error) {
	if body.ID == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("id", "body"))
	}
	if body.URL == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("url", "body"))
	}
	if body.Component == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("component", "body"))
	}
	if body.ComponentVersion == nil {
		err = goa.MergeErrors(err, goa.MissingFieldError("component_version", "body"))
	}
	if body.URL != nil {
		err = goa.MergeErrors(err, goa.ValidateFormat("body.url", *body.URL, goa.FormatURI))
	}
	return
}
